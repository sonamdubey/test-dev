@model BikewaleOpr.Models.BikeSeries.BikeSeriesPageVM

@if (Model != null)
{
    ViewBag.Title = Model.PageTitle;
    ViewBag.PageTitle = Model.PageTitle;
    <div id="manageBikeSeries" class="row">
        <div class="col m10 margin-top10">
            @if (Model.BikeSeriesList != null)
            {
                <table id="bikeSeriesList" class="bordered highlight z-depth-3 centered">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Name</th>
                            <th>Masking Name</th>
                            <th>Make Name</th>
                            <th>Edit</th>
                            <th>Delete</th>
                            <th>Created On</th>
                            <th>Last Updated On</th>
                            <th>Updated By</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var series in Model.BikeSeriesList)
                        {
                            if (series.BikeMake != null)
                            {
                                <tr data-seriesid="@series.SeriesId">
                                    <td>@series.SeriesId</td>
                                    <td class="teal lighten-4">@series.SeriesName</td>
                                    <td>@series.SeriesMaskingName</td>
                                    <td>@series.BikeMake.MakeName</td>
                                    <td><a href="#modal-make-update" class="tooltipped" href="javascript:void(0)" data-delay="100" data-tooltip="Edit Series" rel="nofollow" data-bind="event: {click: function(d, e) { editSeriesClick(e) }}"><i class="material-icons icon-blue">mode_edit</i></a></td>
                                    <td><a class="tooltipped" href="javascript:void(0)" data-delay="100" data-tooltip="Delete Series" rel="nofollow" data-target="delete-confirm-modal" data-bind="event:{click: function(d, e){ deleteEvent(e)}}" ><i class="material-icons icon-red">delete</i></a></td>
                                    <td>@series.CreatedOn.ToString("dd/MM/yyyy")</td>
                                    <td>@series.UpdatedOn.ToString("dd/MM/yyyy")</td>
                                    <td>@series.UpdatedBy</td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
              }
        </div>
        <div class="col m2">
            <input id="userId" name="UpdatedBy" value="@Model.UpdatedBy" type="hidden" />
            <div>
                <ul class="collapsible margin-top10" data-collapsible="accordion">
                    <li>
                        <div class="collapsible-header">
                            <strong>
                                Add Series
                            </strong>
                        </div>
                        <div class="collapsible-body">
                            <div class="container">
                                <div class="input-field row m12">
                                    <select id="selectMake" name="MakeId" data-bind="value: selectedMakeId">
                                        <option value="" disabled selected>Select Make</option>
                                        @if(Model.BikeMakesList != null)
                                        {
                                            foreach(var make in Model.BikeMakesList)
                                            {
                                                <option value="@make.MakeId">@make.MakeName</option>
                                            }
                                        }
                                    </select>
                                </div>
                                <div class="input-field row m12">
                                    <input id="txtSeriesName" type="text" class="validate" name="SeriesName" data-bind="textInput: seriesName, css:seriesMsg()!=''?'invalid':'' " length="30" maxlength="30">
                                    <label id="texSeriesLabel" for="txtSeriesName" data-error="" data-bind="attr:{'data-error':seriesMsg}, css:seriesMsg()!=''?'active':''">Series Name</label>
                                </div>
                                <div class="input-field row m12">
                                    <input id="txtSeriesMaskingName" type="text" class="validate" name="SeriesMaskingName" data-bind="textInput: seriesMaskingName, css:seriesMaskingMsg()!=''?'invalid':'' " length="50" maxlength="50">
                                    <label id="txtSeriesMaskingLabel" for="txtSeriesMaskingName" data-error="" data-bind="attr:{'data-error':seriesMaskingMsg}, css:seriesMaskingMsg()!=''?'active':''">Series Masking Name</label>
                                </div>
                                <div class="input-field row m12">
                                    <button id="btnAddSeries" class="btn waves-effect waves-light" type="submit" name="action" data-bind="event : { click : function() { return validateSubmit();}}">
                                        Add Series
                                    </button>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div id="modal-make-update" class="modal">
            <div class="modal-content">
                <h4>Update <span data-bind="text: selectedSeriesName"></span> Data</h4>
                <div>
                    <div class="input-field row m12">
                        <input id="txtSeriesNameUpdate" type="text" class="validate" name="makeName" data-bind="textInput: seriesNameUpdate ">
                        <label for="txtSeriesNameUpdate">Series Name</label>
                    </div>
                    <div class="input-field row m12">
                        <input id="txtSeriesMaskingNameUpdate" type="text" class="validate" name="maskingName" data-bind="textInput: seriesMaskingNameUpdate">
                        <label for="txtSeriesMaskingNameUpdate">Series Masking Name</label>
                    </div>
                    @*<input type="hidden" id="hdnUpdateMakeId" name="MakeId" data-bind="textInput: selectedMake() ? selectedMake().makeId : 0" />
                    <input type="hidden" id="hdnOldMakeMasking" name="OldMakeMasking" data-bind="textInput: selectedMake() ? selectedMake().oldMakeMasking :''" />*@
                </div>
            </div>

            <div class="modal-footer">
                <a class="modal-action modal-close waves-effect waves-green teal white-text btn-flat" data-bind="event : {click : function() { validateUpdate() }}"  style="margin-left:5px;">Update</a>
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
        </div>
        <div id="delete-confirm-modal" class="modal">
            <div class="modal-content">
                <h4>Delete <span data-bind="text: selectedSeriesName"></span> Series</h4>
                <p>Are you sure you want to delete this series?</p>
            </div>
            <div class="modal-footer">
                <a href="#!" id="anchor-delete" class="modal-action modal-close waves-effect waves-green btn-flat" data-bind="event: {click: function(d, e) { deleteSeries(e) }}">Yes</a>
                <a href="#" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
            </div>
        </div>
    </div>
}

<script defer src="~/src/BikeSeries/BikeSeries.js" type="text/javascript"></script>

