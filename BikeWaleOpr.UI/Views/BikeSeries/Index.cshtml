@model BikewaleOpr.Models.BikeSeries.BikeSeriesPageVM

@if (Model != null)
{
    ViewBag.Title = Model.PageTitle;
    ViewBag.PageTitle = Model.PageTitle;
    <div id="manageBikeSeries" class="row">
        <div class="col m10 margin-top10">
            @if (Model.BikeSeriesList != null)
            {
                <table id="bikeSeriesList" class="bordered highlight z-depth-3 centered">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Name</th>
                            <th>Masking Name</th>
                            <th>Series URL</th>
                            <th>Body Style</th>
                            <th>Make Name</th>
                            <th>Synopsis</th>
                            <th>Edit</th>
                            <th>Delete</th>
                            <th>Created On</th>
                            <th>Last Updated On</th>
                            <th>Updated By</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var series in Model.BikeSeriesList)
                        {
                            if (series.BikeMake != null)
                            {
                                <tr data-seriesid="@series.SeriesId">
                                    <td>@series.SeriesId</td>
                                    <td class="teal lighten-4">@series.SeriesName</td>
                                    <td>@series.SeriesMaskingName</td>
                                    <td><i class="material-icons @((series.IsSeriesPageUrl) ? "icon-green" : "icon-red")">@((series.IsSeriesPageUrl) ? "done" : "close")</i></td>
                                    @if (series.BodyStyle != null && series.BodyStyle.BodyStyleId != 0)
                                    {
                                        <td> @series.BodyStyle.BodyStyleName </td>
                                    }
                                    else
                                    {
                                        <td>N/A</td>
                                    }
                                    <td> @series.BikeMake.MakeName </td>
                                    <td><a href="#!" data-target="modal-series-synopsis" data-bind="event : {click : function(d,e) { getSeriesSynopsis(e) }}"><i class="material-icons icon-green">add_circle</i></a></td>
                                    @if (series.BodyStyle != null && series.BodyStyle.BodyStyleId != 0)
                                    {
                                        <td><a href="#series-edit-update" class="tooltipped" data-delay="100" data-tooltip="Edit Series" rel="nofollow" data-makeid="@series.BikeMake.MakeId" data-bodystyleid="@series.BodyStyle.BodyStyleId" data-bind="event: {click: function(d, e) { editSeriesClick(e) }}"><i class="material-icons icon-blue">mode_edit</i></a></td>
                                    }
                                    else
                                    {
                                        <td><a href="#series-edit-update" class="tooltipped" data-delay="100" data-tooltip="Edit Series" rel="nofollow" data-makeid="@series.BikeMake.MakeId" data-bodystyleid="0" data-bind="event: {click: function(d, e) { editSeriesClick(e) }}"><i class="material-icons icon-blue">mode_edit</i></a></td>
                                    }
                                    <td><a class="tooltipped" href="javascript:void(0)" data-delay="100" data-tooltip="Delete Series" rel="nofollow" data-target="delete-confirm-modal" data-bind="event:{click: function(d, e){ deleteEvent(e)}}" ><i class="material-icons icon-red">delete</i></a></td>
                                    <td>@series.CreatedOn.ToString("dd/MM/yyyy")</td>
                                    <td>@series.UpdatedOn.ToString("dd/MM/yyyy")</td>
                                    <td>@series.UpdatedBy</td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
              }
        </div>
        <div class="col m2">
            <input id = "userId" name="UpdatedBy" value="@Model.UpdatedBy" type="hidden" />
            <div>
                <ul class="collapsible margin-top10" data-collapsible="accordion">
                    <li>
                        <div class="collapsible-header">
                            <strong>
                                Add Series
                            </strong>
                        </div>
                        <div class="collapsible-body">
                            <div class="container">
                                <div class="input-field row m12">
                                    <select id ="selectMake" name="MakeId" data-bind="value: selectedMakeId">
                                        <option value = "" disabled selected>Select Make</option>
                                            @if (Model.BikeMakesList != null)
                                            {
                                                foreach (var make in Model.BikeMakesList)
                                                {
                                                    <option value = "@make.MakeId" > @make.MakeName </option>
                                                }
                                            }
                                    </select>
                                </div>
                                <div class="input-field row m12">
                                    <input id = "txtSeriesName" type="text" class="validate" name="SeriesName" data-bind="textInput: seriesName, css:seriesMsg()!=''?'invalid':'' " length="30" maxlength="30">
                                    <label id = "texSeriesLabel" for="txtSeriesName" data-error="" data-bind="attr:{'data-error':seriesMsg}, css:seriesMsg()!=''?'active':''">Series Name</label>
                                  </div>
                                <div class="input-field row m12">
                                    <input id = "txtSeriesMaskingName" type="text" class="validate" name="SeriesMaskingName" data-bind="textInput: seriesMaskingName, css:seriesMaskingMsg()!=''?'invalid':'' " length="50" maxlength="50">
                                    <label id = "txtSeriesMaskingLabel" for="txtSeriesMaskingName" data-error="" data-bind="attr:{'data-error':seriesMaskingMsg}, css:seriesMaskingMsg()!=''?'active':''">Series Masking Name</label>
                                </div>
                                <div class="input-field row s12">
                                    <input type="checkbox" id="chkSeriesURL" name="isSeriesPageUrl" class="with-gap" data-bind="checked: isSeriesUrl" />
                                    <label for="chkSeriesURL">Form Series URL</label>
                                </div>
                                <div class="input-field row m12" data-bind="visible: isSeriesUrl()">
                                    <select id="selectBodyStyle" name="BodyStyleId" data-bind="value: selectedBodyStyleId">
                                        <option disabled selected value="0">Select Body Style</option>
                                        @if (Model.BikeBodyStylesList != null)
                                        {
                                            foreach (var bodystyle in Model.BikeBodyStylesList)
                                            {
                                                <option value="@bodystyle.BodyStyleId"> @bodystyle.BodyStyleName </option>
                                            }
                                        }
                                    </select>
                                </div>
                                <div class="input-field row m12">
                                    <button id = "btnAddSeries" class="btn waves-effect waves-light" type="submit" name="action" data-bind="event : { click : function() { return validateSubmit();}}">
                                        Add Series
                                    </button>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div id="series-edit-update" class="modal">
            <div class="modal-content">
                <h4>Update <span data-bind="text: selectedSeriesName"></span> Data</h4>
                <div class="container">
                    <div class="input-field row m12">
                        <input id="txtSeriesNameUpdate" type="text" class="validate" name="makeName" data-bind="textInput: seriesNameUpdate, css:seriesEditMsg()!=''?'invalid':'' ">
                        <label for="txtSeriesNameUpdate" data-error="" data-bind="attr:{'data-error':seriesEditMsg}, css:seriesEditMsg()!=''?'active':''">Series Name</label>
                    </div>
                    <div class="input-field row m12">
                        <input id="txtSeriesMaskingNameUpdate" type="text" class="validate" name="maskingName" data-bind="textInput: seriesMaskingNameUpdate, css:seriesMaskingEditMsg()!=''?'invalid':''">
                        <label for="txtSeriesMaskingNameUpdate" data-error="" data-bind="attr:{'data-error':seriesMaskingEditMsg}, css:seriesMaskingEditMsg()!=''?'active':''">Series Masking Name</label>
                    </div>
                    <div class="input-field row m12">
                        <input type="checkbox" id="chkEditSeriesURL" name="isSeriesPageUrl" class="with-gap" data-bind="checked: isSeriesEditUrl" />
                        <label for="chkEditSeriesURL">Form Series URL</label>
                    </div>
                    <div class="input-field row m8" data-bind="visible: isSeriesEditUrl()">
                        <select id="selectBodyStyleUpdate" name="BodyStyleId" data-bind="value: selectedBodyStyleUpdateId">
                            <option disabled data-bind="attr:{value:0,'selected': '0' == selectedBodyStyleUpdateId()?'true':'false' }">Select Body Style</option>
                            @if (Model.BikeBodyStylesList != null)
                            {
                                foreach (var bodystyle in Model.BikeBodyStylesList)
                                {
                                    <option data-bind="attr:{value:@bodystyle.BodyStyleId, 'selected': @bodystyle.BodyStyleId == selectedBodyStyleUpdateId()?'true':'false' }"> @bodystyle.BodyStyleName </option>
                                }
                            }
                        </select>
                    </div>

                </div>
            </div>

            <div class="modal-footer">
                <a class="modal-action waves-effect waves-green teal white-text btn-flat" data-bind="event : {click : function() { validateUpdate() }}" style="margin-left:5px;">Update</a>
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
        </div>
        <div id="modal-series-synopsis" class="modal">
            <div class="modal-content">
                <h4>Update <span data-bind="text: selectedSeriesName"></span> Synopsis</h4>
                <div>
                    <div class="input-field row m12">
                        <textarea id="txtSynopsis" name="synopsis" class="materialize-textarea" length="3000" maxlength="3000" data-bind="textInput: seriesSynopsis"></textarea>
                        <label for="txtSynopsis">Series Synopsis</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green teal white-text btn-flat" style="margin-left:5px;" id="btnUpdateSynopsis" data-bind="event : {click : function() { updateSeriesSynopsis() }}">Update</a>
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
        </div>
        <div id="delete-confirm-modal" class="modal">
            <div class="modal-content">
                <h4>Delete <span data-bind="text: selectedSeriesName"></span> Series</h4>
                <p>Are you sure you want to delete this series?</p>
            </div>
            <div class="modal-footer">
                <a href="#!" id="anchor-delete" class="modal-action modal-close waves-effect waves-green btn-flat" data-bind="event: {click: function(d, e) { deleteSeries(e) }}">Yes</a>
                <a href="#" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
            </div>
        </div>
    </div>
}

<script defer src="~/src/BikeSeries/BikeSeries.js" type="text/javascript"></script>

