ﬁà
JD:\work\bikewaleweb\Bikewale.Comparison.DAL\SponsoredCampaignRepository.cs
	namespace 	
Bikewale
 
. 

Comparison 
. 
DAL !
{ 
public 

class )
SponsoredComparisonRepository .
:/ 0*
ISponsoredComparisonRepository1 O
{ 
public 
bool 1
%DeleteSponsoredComparisonBikeAllRules 9
(9 :
uint: >
comparisonid? K
)K L
{ 	
bool 
isSaved 
= 
false  
;  !
try 
{ 
using 
( 
IDbConnection $

connection% /
=0 1
DatabaseHelper2 @
.@ A
GetMasterConnectionA T
(T U
)U V
)V W
{ 

connection   
.   
Open   #
(  # $
)  $ %
;  % &
var!! 
param!! 
=!! 
new!!  #
DynamicParameters!!$ 5
(!!5 6
)!!6 7
;!!7 8
param"" 
."" 
Add"" 
("" 
$str"" 0
,""0 1
comparisonid""2 >
)""> ?
;""? @

connection## 
.## 
Execute## &
(##& '
$str##' N
,##N O
param##P U
:##U V
param##W \
,##\ ]
commandType##^ i
:##i j
CommandType##k v
.##v w
StoredProcedure	##w Ü
)
##Ü á
;
##á à
if%% 
(%% 

connection%% "
.%%" #
State%%# (
==%%) +
ConnectionState%%, ;
.%%; <
Open%%< @
)%%@ A

connection&& "
.&&" #
Close&&# (
(&&( )
)&&) *
;&&* +
isSaved'' 
='' 
true'' "
;''" #
}(( 
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 

ErrorClass,, 
objErr,, !
=,," #
new,,$ '

ErrorClass,,( 2
(,,2 3
ex,,3 5
,,,5 6
string,,7 =
.,,= >
Format,,> D
(,,D E
$str	,,E µ
,
,,µ ∂
comparisonid
,,∑ √
)
,,√ ƒ
)
,,ƒ ≈
;
,,≈ ∆
}-- 
return.. 
isSaved.. 
;.. 
}// 	
public77 
bool77 <
0DeleteSponsoredComparisonBikeSponsoredModelRules77 D
(77D E
uint77E I
comparisonid77J V
,77V W
uint77X \
SponsoredModelId77] m
)77m n
{88 	
bool99 
isSaved99 
=99 
false99  
;99  !
try:: 
{;; 
using<< 
(<< 
IDbConnection<< $

connection<<% /
=<<0 1
DatabaseHelper<<2 @
.<<@ A
GetMasterConnection<<A T
(<<T U
)<<U V
)<<V W
{== 

connection>> 
.>> 
Open>> #
(>># $
)>>$ %
;>>% &
var?? 
param?? 
=?? 
new??  #
DynamicParameters??$ 5
(??5 6
)??6 7
;??7 8
param@@ 
.@@ 
Add@@ 
(@@ 
$str@@ 0
,@@0 1
comparisonid@@2 >
)@@> ?
;@@? @
paramAA 
.AA 
AddAA 
(AA 
$strAA 4
,AA4 5
SponsoredModelIdAA6 F
)AAF G
;AAG H

connectionBB 
.BB 
ExecuteBB &
(BB& '
$strBB' Y
,BBY Z
paramBB[ `
:BB` a
paramBBb g
,BBg h
commandTypeBBi t
:BBt u
CommandType	BBv Å
.
BBÅ Ç
StoredProcedure
BBÇ ë
)
BBë í
;
BBí ì
ifDD 
(DD 

connectionDD "
.DD" #
StateDD# (
==DD) +
ConnectionStateDD, ;
.DD; <
OpenDD< @
)DD@ A

connectionEE "
.EE" #
CloseEE# (
(EE( )
)EE) *
;EE* +
isSavedFF 
=FF 
trueFF "
;FF" #
}GG 
}HH 
catchII 
(II 
	ExceptionII 
exII 
)II  
{JJ 

ErrorClassKK 
objErrKK !
=KK" #
newKK$ '

ErrorClassKK( 2
(KK2 3
exKK3 5
,KK5 6
stringKK7 =
.KK= >
FormatKK> D
(KKD E
$str	KKE ÿ
,
KKÿ Ÿ
comparisonid
KK⁄ Ê
,
KKÊ Á
SponsoredModelId
KKË ¯
)
KK¯ ˘
)
KK˘ ˙
;
KK˙ ˚
}LL 
returnMM 
isSavedMM 
;MM 
}NN 	
publicVV 
boolVV >
2DeleteSponsoredComparisonBikeSponsoredVersionRulesVV F
(VVF G
uintVVG K
comparisonidVVL X
,VVX Y
uintVVZ ^
sponsoredVersionIdVV_ q
)VVq r
{WW 	
boolXX 
isSavedXX 
=XX 
falseXX  
;XX  !
tryYY 
{ZZ 
using[[ 
([[ 
IDbConnection[[ $

connection[[% /
=[[0 1
DatabaseHelper[[2 @
.[[@ A
GetMasterConnection[[A T
([[T U
)[[U V
)[[V W
{\\ 

connection]] 
.]] 
Open]] #
(]]# $
)]]$ %
;]]% &
var^^ 
param^^ 
=^^ 
new^^  #
DynamicParameters^^$ 5
(^^5 6
)^^6 7
;^^7 8
param__ 
.__ 
Add__ 
(__ 
$str__ 0
,__0 1
comparisonid__2 >
)__> ?
;__? @
param`` 
.`` 
Add`` 
(`` 
$str`` 6
,``6 7
sponsoredVersionId``8 J
)``J K
;``K L

connectionaa 
.aa 
Executeaa &
(aa& '
$straa' [
,aa[ \
paramaa] b
:aab c
paramaad i
,aai j
commandTypeaak v
:aav w
CommandType	aax É
.
aaÉ Ñ
StoredProcedure
aaÑ ì
)
aaì î
;
aaî ï
ifcc 
(cc 

connectioncc "
.cc" #
Statecc# (
==cc) +
ConnectionStatecc, ;
.cc; <
Opencc< @
)cc@ A

connectiondd "
.dd" #
Closedd# (
(dd( )
)dd) *
;dd* +
isSavedee 
=ee 
trueee "
;ee" #
}ff 
}gg 
catchhh 
(hh 
	Exceptionhh 
exhh 
)hh  
{ii 

ErrorClassjj 
objErrjj !
=jj" #
newjj$ '

ErrorClassjj( 2
(jj2 3
exjj3 5
,jj5 6
stringjj7 =
.jj= >
Formatjj> D
(jjD E
$str	jjE ‹
,
jj‹ ›
comparisonid
jjﬁ Í
,
jjÍ Î 
sponsoredVersionId
jjÏ ˛
)
jj˛ ˇ
)
jjˇ Ä
;
jjÄ Å
}kk 
returnll 
isSavedll 
;ll 
}mm 	
publicuu 
booluu ;
/DeleteSponsoredComparisonBikeTargetVersionRulesuu C
(uuC D
uintuuD H
comparisoniduuI U
,uuU V
uintuuW [
targetversionIduu\ k
)uuk l
{vv 	
boolww 
isSavedww 
=ww 
falseww  
;ww  !
tryxx 
{yy 
usingzz 
(zz 
IDbConnectionzz $

connectionzz% /
=zz0 1
DatabaseHelperzz2 @
.zz@ A
GetMasterConnectionzzA T
(zzT U
)zzU V
)zzV W
{{{ 

connection|| 
.|| 
Open|| #
(||# $
)||$ %
;||% &
var}} 
param}} 
=}} 
new}}  #
DynamicParameters}}$ 5
(}}5 6
)}}6 7
;}}7 8
param~~ 
.~~ 
Add~~ 
(~~ 
$str~~ 0
,~~0 1
comparisonid~~2 >
)~~> ?
;~~? @
param 
. 
Add 
( 
$str 3
,3 4
targetversionId5 D
)D E
;E F

connection
ÄÄ 
.
ÄÄ 
Execute
ÄÄ &
(
ÄÄ& '
$str
ÄÄ' X
,
ÄÄX Y
param
ÄÄZ _
:
ÄÄ_ `
param
ÄÄa f
,
ÄÄf g
commandType
ÄÄh s
:
ÄÄs t
CommandTypeÄÄu Ä
.ÄÄÄ Å
StoredProcedureÄÄÅ ê
)ÄÄê ë
;ÄÄë í
if
ÇÇ 
(
ÇÇ 

connection
ÇÇ "
.
ÇÇ" #
State
ÇÇ# (
==
ÇÇ) +
ConnectionState
ÇÇ, ;
.
ÇÇ; <
Open
ÇÇ< @
)
ÇÇ@ A

connection
ÉÉ "
.
ÉÉ" #
Close
ÉÉ# (
(
ÉÉ( )
)
ÉÉ) *
;
ÉÉ* +
isSaved
ÑÑ 
=
ÑÑ 
true
ÑÑ "
;
ÑÑ" #
}
ÖÖ 
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
ex
áá 
)
áá  
{
àà 

ErrorClass
ââ 
objErr
ââ !
=
ââ" #
new
ââ$ '

ErrorClass
ââ( 2
(
ââ2 3
ex
ââ3 5
,
ââ5 6
string
ââ7 =
.
ââ= >
Format
ââ> D
(
ââD E
$strââE ÿ
,ââÿ Ÿ
comparisonidââ⁄ Ê
,ââÊ Á
targetversionIdââË ˜
)ââ˜ ¯
)ââ¯ ˘
;ââ˘ ˙
}
ää 
return
ãã 
isSaved
ãã 
;
ãã 
}
åå 	
public
îî 
IEnumerable
îî 
<
îî (
SponsoredVersionEntityBase
îî 5
>
îî5 6+
GetActiveSponsoredComparisons
îî7 T
(
îîT U
)
îîU V
{
ïï 	
IEnumerable
ññ 
<
ññ (
SponsoredVersionEntityBase
ññ 2
>
ññ2 3
sponsoredVersions
ññ4 E
=
ññF G
null
ññH L
;
ññL M
try
òò 
{
ôô 
using
öö 
(
öö 
IDbConnection
öö $

connection
öö% /
=
öö0 1
DatabaseHelper
öö2 @
.
öö@ A#
GetReadonlyConnection
ööA V
(
ööV W
)
ööW X
)
ööX Y
{
õõ 

connection
úú 
.
úú 
Open
úú #
(
úú# $
)
úú$ %
;
úú% &
sponsoredVersions
ùù %
=
ùù& '

connection
ùù( 2
.
ùù2 3
Query
ùù3 8
<
ùù8 9(
SponsoredVersionEntityBase
ùù9 S
>
ùùS T
(
ùùT U
$str
ùùU t
,
ùùt u
commandTypeùùv Å
:ùùÅ Ç
CommandTypeùùÉ é
.ùùé è
StoredProcedureùùè û
)ùùû ü
;ùùü †
if
†† 
(
†† 

connection
†† "
.
††" #
State
††# (
==
††) +
ConnectionState
††, ;
.
††; <
Open
††< @
)
††@ A

connection
°° "
.
°°" #
Close
°°# (
(
°°( )
)
°°) *
;
°°* +
}
¢¢ 
}
££ 
catch
§§ 
(
§§ 
	Exception
§§ 
ex
§§ 
)
§§  
{
•• 

ErrorClass
¶¶ 
objErr
¶¶ !
=
¶¶" #
new
¶¶$ '

ErrorClass
¶¶( 2
(
¶¶2 3
ex
¶¶3 5
,
¶¶5 6
$str
¶¶7 t
)
¶¶t u
;
¶¶u v
}
ßß 
return
©© 
sponsoredVersions
©© $
;
©©$ %
}
™™ 	
public
±± !
SponsoredComparison
±± "$
GetSponsoredComparison
±±# 9
(
±±9 :
)
±±: ;
{
≤≤ 	!
SponsoredComparison
≥≥ 
objCampaign
≥≥  +
=
≥≥, -
null
≥≥. 2
;
≥≥2 3
try
¥¥ 
{
µµ 
using
∂∂ 
(
∂∂ 
IDbConnection
∂∂ $

connection
∂∂% /
=
∂∂0 1
DatabaseHelper
∂∂2 @
.
∂∂@ A!
GetMasterConnection
∂∂A T
(
∂∂T U
)
∂∂U V
)
∂∂V W
{
∑∑ 

connection
∏∏ 
.
∏∏ 
Open
∏∏ #
(
∏∏# $
)
∏∏$ %
;
∏∏% &
var
ππ 
param
ππ 
=
ππ 
new
ππ  #
DynamicParameters
ππ$ 5
(
ππ5 6
)
ππ6 7
;
ππ7 8
objCampaign
∫∫ 
=
∫∫  !

connection
∫∫" ,
.
∫∫, -
Query
∫∫- 2
<
∫∫2 3!
SponsoredComparison
∫∫3 F
>
∫∫F G
(
∫∫G H
$str
∫∫H `
,
∫∫` a
param
∫∫b g
:
∫∫g h
param
∫∫i n
,
∫∫n o
commandType
∫∫p {
:
∫∫{ |
CommandType∫∫} à
.∫∫à â
StoredProcedure∫∫â ò
)∫∫ò ô
.∫∫ô ö
FirstOrDefault∫∫ö ®
(∫∫® ©
)∫∫© ™
;∫∫™ ´
if
ΩΩ 
(
ΩΩ 

connection
ΩΩ "
.
ΩΩ" #
State
ΩΩ# (
==
ΩΩ) +
ConnectionState
ΩΩ, ;
.
ΩΩ; <
Open
ΩΩ< @
)
ΩΩ@ A

connection
ææ "
.
ææ" #
Close
ææ# (
(
ææ( )
)
ææ) *
;
ææ* +
}
øø 
}
¿¿ 
catch
¡¡ 
(
¡¡ 
	Exception
¡¡ 
ex
¡¡ 
)
¡¡  
{
¬¬ 

ErrorClass
√√ 
objErr
√√ !
=
√√" #
new
√√$ '

ErrorClass
√√( 2
(
√√2 3
ex
√√3 5
,
√√5 6
$str√√7 Ö
)√√Ö Ü
;√√Ü á
}
ƒƒ 
return
≈≈ 
objCampaign
≈≈ 
;
≈≈ 
}
∆∆ 	
public
ÕÕ 
IEnumerable
ÕÕ 
<
ÕÕ !
SponsoredComparison
ÕÕ .
>
ÕÕ. /%
GetSponsoredComparisons
ÕÕ0 G
(
ÕÕG H
string
ÕÕH N
statuses
ÕÕO W
)
ÕÕW X
{
ŒŒ 	
IEnumerable
œœ 
<
œœ !
SponsoredComparison
œœ +
>
œœ+ ,!
comparisonCampaigns
œœ- @
=
œœA B
null
œœC G
;
œœG H
try
—— 
{
““ 
using
”” 
(
”” 
IDbConnection
”” $

connection
””% /
=
””0 1
DatabaseHelper
””2 @
.
””@ A!
GetMasterConnection
””A T
(
””T U
)
””U V
)
””V W
{
‘‘ 

connection
’’ 
.
’’ 
Open
’’ #
(
’’# $
)
’’$ %
;
’’% &
var
÷÷ 
param
÷÷ 
=
÷÷ 
new
÷÷  #
DynamicParameters
÷÷$ 5
(
÷÷5 6
)
÷÷6 7
;
÷÷7 8
param
◊◊ 
.
◊◊ 
Add
◊◊ 
(
◊◊ 
$str
◊◊ ,
,
◊◊, -
statuses
◊◊. 6
)
◊◊6 7
;
◊◊7 8!
comparisonCampaigns
ÿÿ '
=
ÿÿ( )

connection
ÿÿ* 4
.
ÿÿ4 5
Query
ÿÿ5 :
<
ÿÿ: ;!
SponsoredComparison
ÿÿ; N
>
ÿÿN O
(
ÿÿO P
$str
ÿÿP i
,
ÿÿi j
param
ÿÿk p
:
ÿÿp q
param
ÿÿr w
,
ÿÿw x
commandTypeÿÿy Ñ
:ÿÿÑ Ö
CommandTypeÿÿÜ ë
.ÿÿë í
StoredProcedureÿÿí °
)ÿÿ° ¢
;ÿÿ¢ £
if
€€ 
(
€€ 

connection
€€ "
.
€€" #
State
€€# (
==
€€) +
ConnectionState
€€, ;
.
€€; <
Open
€€< @
)
€€@ A

connection
‹‹ "
.
‹‹" #
Close
‹‹# (
(
‹‹( )
)
‹‹) *
;
‹‹* +
}
›› 
}
ﬁﬁ 
catch
ﬂﬂ 
(
ﬂﬂ 
	Exception
ﬂﬂ 
ex
ﬂﬂ 
)
ﬂﬂ  
{
‡‡ 

ErrorClass
·· 
objErr
·· !
=
··" #
new
··$ '

ErrorClass
··( 2
(
··2 3
ex
··3 5
,
··5 6
string
··7 =
.
··= >
Format
··> D
(
··D E
$str··E ò
,··ò ô
statuses··ö ¢
)··¢ £
)··£ §
;··§ •
}
‚‚ 
return
‰‰ !
comparisonCampaigns
‰‰ &
;
‰‰& '
}
ÂÂ 	
public
ÌÌ 
IEnumerable
ÌÌ 
<
ÌÌ 
SponsoredVersion
ÌÌ +
>
ÌÌ+ ,1
#GetSponsoredComparisonSponsoredBike
ÌÌ- P
(
ÌÌP Q
uint
ÌÌQ U
comparisonid
ÌÌV b
)
ÌÌb c
{
ÓÓ 	
IEnumerable
ÔÔ 
<
ÔÔ 
SponsoredVersion
ÔÔ (
>
ÔÔ( )
sponsoredVersion
ÔÔ* :
=
ÔÔ; <
null
ÔÔ= A
;
ÔÔA B
try
 
{
ÒÒ 
using
ÚÚ 
(
ÚÚ 
IDbConnection
ÚÚ $

connection
ÚÚ% /
=
ÚÚ0 1
DatabaseHelper
ÚÚ2 @
.
ÚÚ@ A!
GetMasterConnection
ÚÚA T
(
ÚÚT U
)
ÚÚU V
)
ÚÚV W
{
ÛÛ 

connection
ÙÙ 
.
ÙÙ 
Open
ÙÙ #
(
ÙÙ# $
)
ÙÙ$ %
;
ÙÙ% &
var
ıı 
param
ıı 
=
ıı 
new
ıı  #
DynamicParameters
ıı$ 5
(
ıı5 6
)
ıı6 7
;
ıı7 8
param
ˆˆ 
.
ˆˆ 
Add
ˆˆ 
(
ˆˆ 
$str
ˆˆ 0
,
ˆˆ0 1
comparisonid
ˆˆ2 >
)
ˆˆ> ?
;
ˆˆ? @
sponsoredVersion
¯¯ $
=
¯¯% &

connection
¯¯' 1
.
¯¯1 2
Query
¯¯2 7
<
¯¯7 8
TargetVersion
¯¯8 E
,
¯¯E F
SponsoredVersion
¯¯G W
,
¯¯W X
SponsoredVersion
¯¯Y i
>
¯¯i j
(
¯¯j k
$str¯¯k ä
,¯¯ä ã
(¯¯å ç
target¯¯ç ì
,¯¯ì î
	sponsored¯¯ï û
)¯¯û ü
=>¯¯† ¢
{
˘˘ 
	sponsored
˙˙ !
.
˙˙! "
Target
˙˙" (
=
˙˙) *
target
˙˙+ 1
;
˙˙1 2
return
˚˚ 
	sponsored
˚˚ (
;
˚˚( )
}
˝˝ 
,
˝˝ 
param
˝˝ 
:
˝˝ 
param
˝˝ #
,
˝˝# $
commandType
˝˝% 0
:
˝˝0 1
CommandType
˝˝2 =
.
˝˝= >
StoredProcedure
˝˝> M
,
˝˝M N
splitOn
˝˝O V
:
˝˝V W
$str˝˝X ç
)˝˝ç é
;˝˝é è
if
ˇˇ 
(
ˇˇ 

connection
ˇˇ "
.
ˇˇ" #
State
ˇˇ# (
==
ˇˇ) +
ConnectionState
ˇˇ, ;
.
ˇˇ; <
Open
ˇˇ< @
)
ˇˇ@ A

connection
ÄÄ "
.
ÄÄ" #
Close
ÄÄ# (
(
ÄÄ( )
)
ÄÄ) *
;
ÄÄ* +
}
ÅÅ 
}
ÇÇ 
catch
ÉÉ 
(
ÉÉ 
	Exception
ÉÉ 
ex
ÉÉ 
)
ÉÉ  
{
ÑÑ 

ErrorClass
ÖÖ 
objErr
ÖÖ !
=
ÖÖ" #
new
ÖÖ$ '

ErrorClass
ÖÖ( 2
(
ÖÖ2 3
ex
ÖÖ3 5
,
ÖÖ5 6
string
ÖÖ7 =
.
ÖÖ= >
Format
ÖÖ> D
(
ÖÖD E
$strÖÖE ±
,ÖÖ± ≤
comparisonidÖÖ≥ ø
)ÖÖø ¿
)ÖÖ¿ ¡
;ÖÖ¡ ¬
}
ÜÜ 
return
áá 
sponsoredVersion
áá #
;
áá# $
}
àà 	
public
ëë $
TargetSponsoredMapping
ëë %2
$GetSponsoredComparisonVersionMapping
ëë& J
(
ëëJ K
uint
ëëK O
comparisonid
ëëP \
,
ëë\ ]
uint
ëë^ b
targetModelId
ëëc p
,
ëëp q
uint
ëër v
sponsoredModelIdëëw á
)ëëá à
{
íí 	$
TargetSponsoredMapping
ìì "
	objResult
ìì# ,
=
ìì- .
default
ìì/ 6
(
ìì6 7$
TargetSponsoredMapping
ìì7 M
)
ììM N
;
ììN O
try
îî 
{
ïï 
using
ññ 
(
ññ 
IDbConnection
ññ $

connection
ññ% /
=
ññ0 1
DatabaseHelper
ññ2 @
.
ññ@ A!
GetMasterConnection
ññA T
(
ññT U
)
ññU V
)
ññV W
{
óó 
	objResult
òò 
=
òò 
new
òò  #$
TargetSponsoredMapping
òò$ :
(
òò: ;
)
òò; <
;
òò< =

connection
ôô 
.
ôô 
Open
ôô #
(
ôô# $
)
ôô$ %
;
ôô% &
var
öö 
param
öö 
=
öö 
new
öö  #
DynamicParameters
öö$ 5
(
öö5 6
)
öö6 7
;
öö7 8
param
õõ 
.
õõ 
Add
õõ 
(
õõ 
$str
õõ 0
,
õõ0 1
comparisonid
õõ2 >
)
õõ> ?
;
õõ? @
param
úú 
.
úú 
Add
úú 
(
úú 
$str
úú 1
,
úú1 2
targetModelId
úú3 @
)
úú@ A
;
úúA B
param
ùù 
.
ùù 
Add
ùù 
(
ùù 
$str
ùù 4
,
ùù4 5
sponsoredModelId
ùù6 F
)
ùùF G
;
ùùG H
using
üü 
(
üü 
var
üü 
results
üü &
=
üü' (

connection
üü) 3
.
üü3 4
QueryMultiple
üü4 A
(
üüA B
$str
üüB h
,
üüh i
param
üüj o
:
üüo p
param
üüq v
,
üüv w
commandTypeüüx É
:üüÉ Ñ
CommandTypeüüÖ ê
.üüê ë
StoredProcedureüüë †
)üü† °
)üü° ¢
{
†† 
	objResult
°° !
.
°°! "#
SponsoredModelVersion
°°" 7
=
°°8 9
results
°°: A
.
°°A B
Read
°°B F
<
°°F G
	BikeModel
°°G P
>
°°P Q
(
°°Q R
)
°°R S
;
°°S T
	objResult
¢¢ !
.
¢¢! "#
TargetVersionsMapping
¢¢" 7
=
¢¢8 9
results
¢¢: A
.
¢¢A B
Read
¢¢B F
<
¢¢F G%
BikeModelVersionMapping
¢¢G ^
>
¢¢^ _
(
¢¢_ `
)
¢¢` a
;
¢¢a b
}
££ 
if
•• 
(
•• 

connection
•• "
.
••" #
State
••# (
==
••) +
ConnectionState
••, ;
.
••; <
Open
••< @
)
••@ A

connection
¶¶ "
.
¶¶" #
Close
¶¶# (
(
¶¶( )
)
¶¶) *
;
¶¶* +
}
ßß 
}
®® 
catch
©© 
(
©© 
	Exception
©© 
ex
©© 
)
©©  
{
™™ 

ErrorClass
´´ 
objErr
´´ !
=
´´" #
new
´´$ '

ErrorClass
´´( 2
(
´´2 3
ex
´´3 5
,
´´5 6
string
´´7 =
.
´´= >
Format
´´> D
(
´´D E
$str´´E ﬁ
,´´ﬁ ﬂ
comparisonid´´‡ Ï
,´´Ï Ì
targetModelId´´Ó ˚
,´´˚ ¸ 
sponsoredModelId´´˝ ç
)´´ç é
)´´é è
;´´è ê
}
¨¨ 
return
≠≠ 
	objResult
≠≠ 
;
≠≠ 
}
ÆÆ 	
public
∂∂ 
uint
∂∂ %
SaveSponsoredComparison
∂∂ +
(
∂∂+ ,!
SponsoredComparison
∂∂, ?
campaign
∂∂@ H
)
∂∂H I
{
∑∑ 	
uint
∏∏ 
comparisonId
∏∏ 
=
∏∏ 
$num
∏∏  !
;
∏∏! "
try
ππ 
{
∫∫ 
using
ªª 
(
ªª 
IDbConnection
ªª $

connection
ªª% /
=
ªª0 1
DatabaseHelper
ªª2 @
.
ªª@ A!
GetMasterConnection
ªªA T
(
ªªT U
)
ªªU V
)
ªªV W
{
ºº 

connection
ΩΩ 
.
ΩΩ 
Open
ΩΩ #
(
ΩΩ# $
)
ΩΩ$ %
;
ΩΩ% &
var
ææ 
param
ææ 
=
ææ 
new
ææ  #
DynamicParameters
ææ$ 5
(
ææ5 6
)
ææ6 7
;
ææ7 8
param
øø 
.
øø 
Add
øø 
(
øø 
$str
øø (
,
øø( )
campaign
øø* 2
.
øø2 3
Name
øø3 7
)
øø7 8
;
øø8 9
param
¿¿ 
.
¿¿ 
Add
¿¿ 
(
¿¿ 
$str
¿¿ -
,
¿¿- .
campaign
¿¿/ 7
.
¿¿7 8
	StartDate
¿¿8 A
)
¿¿A B
;
¿¿B C
param
¡¡ 
.
¡¡ 
Add
¡¡ 
(
¡¡ 
$str
¡¡ +
,
¡¡+ ,
campaign
¡¡- 5
.
¡¡5 6
EndDate
¡¡6 =
)
¡¡= >
;
¡¡> ?
param
¬¬ 
.
¬¬ 
Add
¬¬ 
(
¬¬ 
$str
¬¬ ,
,
¬¬, -
campaign
¬¬. 6
.
¬¬6 7
LinkText
¬¬7 ?
)
¬¬? @
;
¬¬@ A
param
√√ 
.
√√ 
Add
√√ 
(
√√ 
$str
√√ +
,
√√+ ,
campaign
√√- 5
.
√√5 6
LinkUrl
√√6 =
)
√√= >
;
√√> ?
param
ƒƒ 
.
ƒƒ 
Add
ƒƒ 
(
ƒƒ 
$str
ƒƒ 1
,
ƒƒ1 2
campaign
ƒƒ3 ;
.
ƒƒ; <
NameImpressionUrl
ƒƒ< M
)
ƒƒM N
;
ƒƒN O
param
≈≈ 
.
≈≈ 
Add
≈≈ 
(
≈≈ 
$str
≈≈ 4
,
≈≈4 5
campaign
≈≈6 >
.
≈≈> ?
ImgImpressionUrl
≈≈? O
)
≈≈O P
;
≈≈P Q
param
∆∆ 
.
∆∆ 
Add
∆∆ 
(
∆∆ 
$str
∆∆ -
,
∆∆- .
campaign
∆∆/ 7
.
∆∆7 8
	UpdatedBy
∆∆8 A
)
∆∆A B
;
∆∆B C
param
«« 
.
«« 
Add
«« 
(
«« 
$str
«« &
,
««& '
campaign
««( 0
.
««0 1
Id
««1 3
,
««3 4
dbType
««5 ;
:
««; <
DbType
««= C
.
««C D
Int32
««D I
,
««I J
	direction
««K T
:
««T U 
ParameterDirection
««V h
.
««h i
InputOutput
««i t
)
««t u
;
««u v

connection
»» 
.
»» 
Execute
»» &
(
»»& '
$str
»»' A
,
»»A B
param
»»C H
:
»»H I
param
»»J O
,
»»O P
commandType
»»Q \
:
»»\ ]
CommandType
»»^ i
.
»»i j
StoredProcedure
»»j y
)
»»y z
;
»»z {
comparisonId
    
=
  ! "
Convert
  # *
.
  * +
ToUInt32
  + 3
(
  3 4
param
  4 9
.
  9 :
Get
  : =
<
  = >
int
  > A
>
  A B
(
  B C
$str
  C K
)
  K L
)
  L M
;
  M N
if
ÃÃ 
(
ÃÃ 

connection
ÃÃ "
.
ÃÃ" #
State
ÃÃ# (
==
ÃÃ) +
ConnectionState
ÃÃ, ;
.
ÃÃ; <
Open
ÃÃ< @
)
ÃÃ@ A

connection
ÕÕ "
.
ÕÕ" #
Close
ÕÕ# (
(
ÕÕ( )
)
ÕÕ) *
;
ÕÕ* +
}
ŒŒ 
}
œœ 
catch
–– 
(
–– 
	Exception
–– 
ex
–– 
)
––  
{
—— 

ErrorClass
““ 
objErr
““ !
=
““" #
new
““$ '

ErrorClass
““( 2
(
““2 3
ex
““3 5
,
““5 6
$str““7 Ñ
)““Ñ Ö
;““Ö Ü
}
”” 
return
’’ 
comparisonId
’’ 
;
’’  
}
÷÷ 	
public
›› 
bool
›› .
 SaveSponsoredComparisonBikeRules
›› 4
(
››4 5"
VersionTargetMapping
››5 I
rules
››J O
)
››O P
{
ﬁﬁ 	
bool
ﬂﬂ 
isSaved
ﬂﬂ 
=
ﬂﬂ 
false
ﬂﬂ  
;
ﬂﬂ  !
try
‡‡ 
{
·· 
using
‚‚ 
(
‚‚ 
IDbConnection
‚‚ $

connection
‚‚% /
=
‚‚0 1
DatabaseHelper
‚‚2 @
.
‚‚@ A!
GetMasterConnection
‚‚A T
(
‚‚T U
)
‚‚U V
)
‚‚V W
{
„„ 

connection
‰‰ 
.
‰‰ 
Open
‰‰ #
(
‰‰# $
)
‰‰$ %
;
‰‰% &
var
ÂÂ 
param
ÂÂ 
=
ÂÂ 
new
ÂÂ  #
DynamicParameters
ÂÂ$ 5
(
ÂÂ5 6
)
ÂÂ6 7
;
ÂÂ7 8
param
ÊÊ 
.
ÊÊ 
Add
ÊÊ 
(
ÊÊ 
$str
ÊÊ 0
,
ÊÊ0 1
rules
ÊÊ2 7
.
ÊÊ7 8
ComparisonId
ÊÊ8 D
)
ÊÊD E
;
ÊÊE F
param
ÁÁ 
.
ÁÁ 
Add
ÁÁ 
(
ÁÁ 
$str
ÁÁ 4
,
ÁÁ4 5
rules
ÁÁ6 ;
.
ÁÁ; <
IsVersionMapping
ÁÁ< L
)
ÁÁL M
;
ÁÁM N
param
ËË 
.
ËË 
Add
ËË 
(
ËË 
$str
ËË 6
,
ËË6 7
rules
ËË8 =
.
ËË= > 
TargetSponsoredIds
ËË> P
)
ËËP Q
;
ËËQ R
param
ÈÈ 
.
ÈÈ 
Add
ÈÈ 
(
ÈÈ 
$str
ÈÈ 2
,
ÈÈ2 3
rules
ÈÈ4 9
.
ÈÈ9 :
ImpressionUrl
ÈÈ: G
)
ÈÈG H
;
ÈÈH I

connection
ÍÍ 
.
ÍÍ 
Execute
ÍÍ &
(
ÍÍ& '
$str
ÍÍ' J
,
ÍÍJ K
param
ÍÍL Q
:
ÍÍQ R
param
ÍÍS X
,
ÍÍX Y
commandType
ÍÍZ e
:
ÍÍe f
CommandType
ÍÍg r
.
ÍÍr s
StoredProcedureÍÍs Ç
)ÍÍÇ É
;ÍÍÉ Ñ
if
ÏÏ 
(
ÏÏ 

connection
ÏÏ "
.
ÏÏ" #
State
ÏÏ# (
==
ÏÏ) +
ConnectionState
ÏÏ, ;
.
ÏÏ; <
Open
ÏÏ< @
)
ÏÏ@ A

connection
ÌÌ "
.
ÌÌ" #
Close
ÌÌ# (
(
ÌÌ( )
)
ÌÌ) *
;
ÌÌ* +
isSaved
ÓÓ 
=
ÓÓ 
true
ÓÓ "
;
ÓÓ" #
}
ÔÔ 
}
 
catch
ÒÒ 
(
ÒÒ 
	Exception
ÒÒ 
ex
ÒÒ 
)
ÒÒ  
{
ÚÚ 

ErrorClass
ÛÛ 
objErr
ÛÛ !
=
ÛÛ" #
new
ÛÛ$ '

ErrorClass
ÛÛ( 2
(
ÛÛ2 3
ex
ÛÛ3 5
,
ÛÛ5 6
$strÛÛ7 ç
)ÛÛç é
;ÛÛé è
}
ÙÙ 
return
ıı 
isSaved
ıı 
;
ıı 
}
ˆˆ 	
public
˛˛ 
bool
˛˛ -
ChangeSponsoredComparisonStatus
˛˛ 3
(
˛˛3 4
uint
˛˛4 8
comparisonid
˛˛9 E
,
˛˛E F
ushort
˛˛G M
status
˛˛N T
)
˛˛T U
{
ˇˇ 	
bool
ÄÄ 
isSaved
ÄÄ 
=
ÄÄ 
false
ÄÄ  
;
ÄÄ  !
try
ÅÅ 
{
ÇÇ 
using
ÉÉ 
(
ÉÉ 
IDbConnection
ÉÉ $

connection
ÉÉ% /
=
ÉÉ0 1
DatabaseHelper
ÉÉ2 @
.
ÉÉ@ A!
GetMasterConnection
ÉÉA T
(
ÉÉT U
)
ÉÉU V
)
ÉÉV W
{
ÑÑ 

connection
ÖÖ 
.
ÖÖ 
Open
ÖÖ #
(
ÖÖ# $
)
ÖÖ$ %
;
ÖÖ% &
var
ÜÜ 
param
ÜÜ 
=
ÜÜ 
new
ÜÜ  #
DynamicParameters
ÜÜ$ 5
(
ÜÜ5 6
)
ÜÜ6 7
;
ÜÜ7 8
param
áá 
.
áá 
Add
áá 
(
áá 
$str
áá 0
,
áá0 1
comparisonid
áá2 >
)
áá> ?
;
áá? @
param
àà 
.
àà 
Add
àà 
(
àà 
$str
àà *
,
àà* +
status
àà, 2
)
àà2 3
;
àà3 4

connection
ää 
.
ää 
Execute
ää &
(
ää& '
$str
ää' H
,
ääH I
param
ääJ O
:
ääO P
param
ääQ V
,
ääV W
commandType
ääX c
:
ääc d
CommandType
ääe p
.
ääp q
StoredProcedureääq Ä
)ääÄ Å
;ääÅ Ç
if
åå 
(
åå 

connection
åå "
.
åå" #
State
åå# (
==
åå) +
ConnectionState
åå, ;
.
åå; <
Open
åå< @
)
åå@ A

connection
çç "
.
çç" #
Close
çç# (
(
çç( )
)
çç) *
;
çç* +
isSaved
éé 
=
éé 
true
éé "
;
éé" #
}
èè 
}
êê 
catch
ëë 
(
ëë 
	Exception
ëë 
ex
ëë 
)
ëë  
{
íí 

ErrorClass
ìì 
objErr
ìì !
=
ìì" #
new
ìì$ '

ErrorClass
ìì( 2
(
ìì2 3
ex
ìì3 5
,
ìì5 6
string
ìì7 =
.
ìì= >
Format
ìì> D
(
ììD E
$strììE ∫
,ìì∫ ª
comparisonidììº »
,ìì» …
statusìì  –
)ìì– —
)ìì— “
;ìì“ ”
}
îî 
return
ïï 
isSaved
ïï 
;
ïï 
}
ññ 	
}
óó 
}òò Ò
FD:\work\bikewaleweb\Bikewale.Comparison.DAL\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str 2
)2 3
]3 4
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str 4
)4 5
]5 6
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *