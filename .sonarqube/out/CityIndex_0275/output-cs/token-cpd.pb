π
%D:\work\bikewaleweb\CityIndex\City.cs
	namespace 	
CityAutoSuggest
 
{ 
public		 

class		 
CityList		 
{

 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
public 
CitySuggestion 

mm_suggest (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
output 
{ 
get "
;" #
set$ '
;' (
}) *
public 
Payload 
payload 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
public 

class 
CityTempList 
{ 
public 
int 
CityId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
CityName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
MaskingName !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
Wt 
{ 
get 
; 
set  
;  !
}" #
public 
string 
	StateName 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ±
/D:\work\bikewaleweb\CityIndex\CitySuggestion.cs
	namespace 	
CityAutoSuggest
 
{ 
public		 

class		 
CitySuggestion		 
{

 
public 
IList 
< 
string 
> 
input "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
int 
weight 
{ 
get 
;  
set! $
;$ %
}& '
public 
Context 
contexts 
{  !
get" %
;% &
set' *
;* +
}, -
} 
public 

class 
Context 
{ 
public 
IList 
< 
string 
> 
types "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
public 

class 
Payload 
{ 
public 
int 
CityId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
CityMaskingName %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
bool 
IsDuplicate 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ≈Ø
,D:\work\bikewaleweb\CityIndex\GetCityList.cs
	namespace 	
CityAutoSuggest
 
{ 
public 

class 
GetCityList 
{ 
public 
static 
IEnumerable !
<! "
CityTempList" .
>. /
CityList0 8
(8 9
)9 :
{ 	
IList 
< 
CityTempList 
> 
objCity  '
=( )
null* .
;. /
Regex 
r 
= 
new 
Regex 
(  
$str  L
)L M
;M N
try 
{ 
using 
( 
	DbCommand  
cmd! $
=% &
	DbFactory' 0
.0 1
GetDBCommand1 =
(= >
$str> K
)K L
)L M
{ 
cmd 
. 
CommandType #
=$ %
CommandType& 1
.1 2
StoredProcedure2 A
;A B
using 
( 
IDataReader &
dr' )
=* +
MySqlDatabase, 9
.9 :
SelectQuery: E
(E F
cmdF I
,I J
ConnectionTypeK Y
.Y Z
ReadOnlyZ b
)b c
)c d
{ 
if 
( 
dr 
!= !
null" &
)& '
{ 
objCity #
=$ %
new& )
List* .
<. /
CityTempList/ ;
>; <
(< =
)= >
;> ?
while !
(" #
dr# %
.% &
Read& *
(* +
)+ ,
), -
objCity  '
.' (
Add( +
(+ ,
new, /
CityTempList0 <
(< =
)= >
{  !
CityId  $ *
=  + ,
Convert  - 4
.  4 5
ToInt32  5 <
(  < =
dr  = ?
[  ? @
$str  @ D
]  D E
)  E F
,  F G
CityName!!$ ,
=!!- .
Convert!!/ 6
.!!6 7
ToString!!7 ?
(!!? @
dr!!@ B
[!!B C
$str!!C I
]!!I J
)!!J K
,!!K L
MaskingName""$ /
=""0 1
Convert""2 9
.""9 :
ToString"": B
(""B C
dr""C E
[""E F
$str""F W
]""W X
)""X Y
,""Y Z
Wt##$ &
=##' (
Convert##) 0
.##0 1
ToInt32##1 8
(##8 9
dr##9 ;
[##; <
$str##< A
]##A B
)##B C
,##C D
	StateName$$$ -
=$$. /
Convert$$0 7
.$$7 8
ToString$$8 @
($$@ A
dr$$A C
[$$C D
$str$$D O
]$$O P
)$$P Q
}%%  !
)%%! "
;%%" #
}&& 
}'' 
}(( 
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
Console,, 
.,, 
	WriteLine,, !
(,,! "
$str,," 8
+,,9 :
ex,,; =
.,,= >
Message,,> E
),,E F
;,,F G
Logs-- 
.-- 
WriteErrorLog-- "
(--" #

MethodBase--# -
.--- .
GetCurrentMethod--. >
(--> ?
)--? @
.--@ A
Name--A E
+--F G
$str--H v
,--v w
ex--x z
)--z {
;--{ |
}.. 
return// 
objCity// 
;// 
}00 	
public88 
static88 
IEnumerable88 !
<88! "
CityList88" *
>88* +
GetSuggestList88, :
(88: ;
IEnumerable88; F
<88F G
CityTempList88G S
>88S T
objCityList88U `
)88` a
{99 	
IList:: 
<:: 
CityList:: 
>:: 
objSuggestList:: *
=::+ ,
null::- 1
;::1 2
int;; 
count;; 
=;; 
objCityList;; #
.;;# $
Count;;$ )
(;;) *
);;* +
;;;+ ,
try<< 
{== 
	Hashtable>> 
ht>> 
=>> 
new>> "
	Hashtable>># ,
(>>, -
)>>- .
;>>. /
ht?? 
.?? 
Add?? 
(?? 
$str?? "
,??" #
$str??$ .
)??. /
;??/ 0
ht??1 3
.??3 4
Add??4 7
(??7 8
$str??8 B
,??B C
$str??D M
)??M N
;??N O
ht??P R
.??R S
Add??S V
(??V W
$str??W a
,??a b
$str??c k
)??k l
;??l m
ht@@ 
.@@ 
Add@@ 
(@@ 
$str@@ 
,@@  
$str@@! )
)@@) *
;@@* +
ht@@, .
.@@. /
Add@@/ 2
(@@2 3
$str@@3 ;
,@@; <
$str@@= D
)@@D E
;@@E F
ht@@G I
.@@I J
Add@@J M
(@@M N
$str@@N V
,@@V W
$str@@X `
)@@` a
;@@a b
htAA 
.AA 
AddAA 
(AA 
$strAA "
,AA" #
$strAA$ /
)AA/ 0
;AA0 1
htAA2 4
.AA4 5
AddAA5 8
(AA8 9
$strAA9 A
,AAA B
$strAAC K
)AAK L
;AAL M
htAAN P
.AAP Q
AddAAQ T
(AAT U
$strAAU `
,AA` a
$strAAb m
)AAm n
;AAn o
htBB 
.BB 
AddBB 
(BB 
$strBB  
,BB  !
$strBB" ,
)BB, -
;BB- .
htBB/ 1
.BB1 2
AddBB2 5
(BB5 6
$strBB6 >
,BB> ?
$strBB@ J
)BBJ K
;BBK L
htBBM O
.BBO P
AddBBP S
(BBS T
$strBBT a
,BBa b
$strBBc s
)BBs t
;BBt u
htCC 
.CC 
AddCC 
(CC 
$strCC +
,CC+ ,
$strCC- 9
)CC9 :
;CC: ;
htCC< >
.CC> ?
AddCC? B
(CCB C
$strCCC J
,CCJ K
$strCCL T
)CCT U
;CCU V
htCCW Y
.CCY Z
AddCCZ ]
(CC] ^
$strCC^ i
,CCi j
$strCCk t
)CCt u
;CCu v
htDD 
.DD 
AddDD 
(DD 
$strDD 
,DD  
$strDD! )
)DD) *
;DD* +
htDD, .
.DD. /
AddDD/ 2
(DD2 3
$strDD3 @
,DD@ A
$strDDB N
)DDN O
;DDO P
htDDQ S
.DDS T
AddDDT W
(DDW X
$strDDX c
,DDc d
$strDDe p
)DDp q
;DDq r
htEE 
.EE 
AddEE 
(EE 
$strEE 
,EE 
$strEE  *
)EE* +
;EE+ ,
htEE- /
.EE/ 0
AddEE0 3
(EE3 4
$strEE4 =
,EE= >
$strEE? G
)EEG H
;EEH I
htEEJ L
.EEL M
AddEEM P
(EEP Q
$strEEQ Z
,EEZ [
$strEE\ f
)EEf g
;EEg h
htFF 
.FF 
AddFF 
(FF 
$strFF !
,FF! "
$strFF# ,
)FF, -
;FF- .
htFF/ 1
.FF1 2
AddFF2 5
(FF5 6
$strFF6 ?
,FF? @
$strFFA M
)FFM N
;FFN O
htFFP R
.FFR S
AddFFS V
(FFV W
$strFFW a
,FFa b
$strFFc l
)FFl m
;FFm n
htGG 
.GG 
AddGG 
(GG 
$strGG 
,GG 
$strGG &
)GG& '
;GG' (
htGG) +
.GG+ ,
AddGG, /
(GG/ 0
$strGG0 =
,GG= >
$strGG? K
)GGK L
;GGL M
htGGN P
.GGP Q
AddGGQ T
(GGT U
$strGGU Z
,GGZ [
$strGG\ c
)GGc d
;GGd e
htHH 
.HH 
AddHH 
(HH 
$strHH "
,HH" #
$strHH$ /
)HH/ 0
;HH0 1
	HashtableKK 
htdKK 
=KK 
newKK  #
	HashtableKK$ -
(KK- .
)KK. /
;KK/ 0
htdLL 
.LL 
AddLL 
(LL 
$strLL ,
,LL, -
$strLL. :
)LL: ;
;LL; <
htdLL= @
.LL@ A
AddLLA D
(LLD E
$strLLE S
,LLS T
$strLLU ^
)LL^ _
;LL_ `
htdLLa d
.LLd e
AddLLe h
(LLh i
$strLLi p
,LLp q
$strLLr w
)LLw x
;LLx y
htdMM 
.MM 
AddMM 
(MM 
$strMM '
,MM' (
$strMM) .
)MM. /
;MM/ 0
htdMM1 4
.MM4 5
AddMM5 8
(MM8 9
$strMM9 C
,MMC D
$strMME J
)MMJ K
;MMK L
htdMMM P
.MMP Q
AddMMQ T
(MMT U
$strMMU ^
,MM^ _
$strMM` j
)MMj k
;MMk l
htdNN 
.NN 
AddNN 
(NN 
$strNN #
,NN# $
$strNN% 0
)NN0 1
;NN1 2
	HashtableOO 
htfOO 
=OO 
newOO  #
	HashtableOO$ -
(OO- .
)OO. /
;OO/ 0

DictionaryQQ 
<QQ 
stringQQ !
,QQ! "
decimalQQ# *
>QQ* +

City_CountQQ, 6
=QQ7 8
newQQ9 <

DictionaryQQ= G
<QQG H
stringQQH N
,QQN O
decimalQQP W
>QQW X
(QQX Y
)QQY Z
;QQZ [
foreachRR 
(RR 
CityTempListRR %
cityItemRR& .
inRR/ 1
objCityListRR2 =
)RR= >
{SS 
ifTT 
(TT 
htdTT 
.TT 
ContainsKeyTT '
(TT' (
cityItemTT( 0
.TT0 1
CityNameTT1 9
)TT9 :
)TT: ;
cityItemUU  
.UU  !
CityNameUU! )
=UU* +
htdUU, /
[UU/ 0
cityItemUU0 8
.UU8 9
CityNameUU9 A
]UUA B
.UUB C
ToStringUUC K
(UUK L
)UUL M
;UUM N
ifWW 
(WW 
!WW 

City_CountWW #
.WW# $
ContainsKeyWW$ /
(WW/ 0
cityItemWW0 8
.WW8 9
CityNameWW9 A
)WWA B
)WWB C

City_CountXX "
.XX" #
AddXX# &
(XX& '
cityItemXX' /
.XX/ 0
CityNameXX0 8
,XX8 9
$numXX: ;
)XX; <
;XX< =
elseYY 
{ZZ 

City_Count[[ "
.[[" #
Remove[[# )
([[) *
cityItem[[* 2
.[[2 3
CityName[[3 ;
)[[; <
;[[< =
htf\\ 
.\\ 
Add\\ 
(\\  
cityItem\\  (
.\\( )
CityName\\) 1
,\\1 2
$str\\3 6
)\\6 7
;\\7 8
}]] 
}^^ 

City_Count__ 
.__ 
Clear__  
(__  !
)__! "
;__" #
objSuggestList`` 
=``  
new``! $
List``% )
<``) *
CityList``* 2
>``2 3
(``3 4
)``4 5
;``5 6
foreachbb 
(bb 
CityTempListbb %
cityItembb& .
inbb/ 1
objCityListbb2 =
)bb= >
{cc 
CityListdd 
ObjTempdd $
=dd% &
newdd' *
CityListdd+ 3
(dd3 4
)dd4 5
;dd5 6
ObjTempff 
.ff 
Idff 
=ff  
cityItemff! )
.ff) *
CityIdff* 0
.ff0 1
ToStringff1 9
(ff9 :
)ff: ;
;ff; <
ObjTempgg 
.gg 
namegg  
=gg! "
cityItemgg# +
.gg+ ,
CityNamegg, 4
.gg4 5
Trimgg5 9
(gg9 :
)gg: ;
;gg; <
ObjTemphh 
.hh 

mm_suggesthh &
=hh' (
newhh) ,
CitySuggestionhh- ;
(hh; <
)hh< =
;hh= >
ifjj 
(jj 
htdjj 
.jj 
ContainsKeyjj '
(jj' (
cityItemjj( 0
.jj0 1
CityNamejj1 9
)jj9 :
)jj: ;
cityItemkk  
.kk  !
CityNamekk! )
=kk* +
htdkk, /
[kk/ 0
cityItemkk0 8
.kk8 9
CityNamekk9 A
]kkA B
.kkB C
ToStringkkC K
(kkK L
)kkL M
;kkM N
stringmm 
cityNamemm #
=mm$ %
cityItemmm& .
.mm. /
CityNamemm/ 7
.mm7 8
Trimmm8 <
(mm< =
)mm= >
;mm> ?
ObjTempnn 
.nn 
outputnn "
=nn# $
cityItemnn% -
.nn- .
CityNamenn. 6
+nn7 8
$strnn9 =
+nn> ?
cityItemnn@ H
.nnH I
	StateNamennI R
;nnR S
ObjTempoo 
.oo 

mm_suggestoo &
.oo& '
weightoo' -
=oo. /
cityItemoo0 8
.oo8 9
Wtoo9 ;
;oo; <
ObjTempqq 
.qq 
payloadqq #
=qq$ %
newqq& )
Payloadqq* 1
(qq1 2
)qq2 3
{rr 
CityIdss 
=ss  
cityItemss! )
.ss) *
CityIdss* 0
,ss0 1
CityMaskingNamett '
=tt( )
cityItemtt* 2
.tt2 3
MaskingNamett3 >
.tt> ?
Trimtt? C
(ttC D
)ttD E
,ttE F
}uu 
;uu 
ifww 
(ww 
htfww 
.ww 
ContainsKeyww '
(ww' (
cityItemww( 0
.ww0 1
CityNameww1 9
)ww9 :
)ww: ;
ObjTempxx 
.xx  
payloadxx  '
.xx' (
IsDuplicatexx( 3
=xx4 5
truexx6 :
;xx: ;
ObjTemp|| 
.|| 

mm_suggest|| &
.||& '
input||' ,
=||- .
new||/ 2
List||3 7
<||7 8
string||8 >
>||> ?
(||? @
)||@ A
;||A B
cityName}} 
=}} 
cityName}} '
.}}' (
Replace}}( /
(}}/ 0
$char}}0 3
,}}3 4
$char}}5 8
)}}8 9
;}}9 :
string~~ 
[~~ 
]~~ 
tokens~~ #
=~~$ %
cityName~~& .
.~~. /
Split~~/ 4
(~~4 5
$char~~5 8
)~~8 9
;~~9 :
ObjTemp
ÄÄ 
.
ÄÄ 

mm_suggest
ÄÄ &
.
ÄÄ& '
input
ÄÄ' ,
.
ÄÄ, -
Add
ÄÄ- 0
(
ÄÄ0 1
ObjTemp
ÄÄ1 8
.
ÄÄ8 9
output
ÄÄ9 ?
)
ÄÄ? @
;
ÄÄ@ A
int
ÇÇ 
length
ÇÇ 
=
ÇÇ  
Math
ÇÇ! %
.
ÇÇ% &
Min
ÇÇ& )
(
ÇÇ) *
tokens
ÇÇ* 0
.
ÇÇ0 1
Length
ÇÇ1 7
,
ÇÇ7 8
$num
ÇÇ8 9
)
ÇÇ9 :
;
ÇÇ: ;
ObjTemp
ÖÖ 
.
ÖÖ 

mm_suggest
ÖÖ &
.
ÖÖ& '
input
ÖÖ' ,
=
ÖÖ- .
new
ÖÖ/ 2
List
ÖÖ3 7
<
ÖÖ7 8
string
ÖÖ8 >
>
ÖÖ> ?
(
ÖÖ? @
)
ÖÖ@ A
;
ÖÖA B
for
àà 
(
àà 
int
àà 
index
àà "
=
àà# $
$num
àà% &
;
àà& '
index
àà( -
<
àà. /
$num
àà0 1
<<
àà2 4
length
àà5 ;
;
àà; <
index
àà= B
++
ààB D
)
ààD E
{
ââ 
int
ää 

temp_value
ää &
=
ää' (
index
ää) .
,
ää. /
jindex
ää0 6
=
ää7 8
$num
ää9 :
;
ää: ;
string
ãã 
value
ãã $
=
ãã% &
string
ãã' -
.
ãã- .
Empty
ãã. 3
;
ãã3 4
while
åå 
(
åå 

temp_value
åå )
>
åå* +
$num
åå, -
)
åå- .
{
çç 
if
éé 
(
éé  
(
éé  !

temp_value
éé! +
&
éé, -
$num
éé. /
)
éé/ 0
>
éé1 2
$num
éé3 4
)
éé4 5
value
èè  %
=
èè& '
string
èè( .
.
èè. /
Format
èè/ 5
(
èè5 6
$str
èè6 ?
,
èè? @
value
èèA F
,
èèF G
tokens
èèH N
[
èèN O
jindex
èèO U
]
èèU V
)
èèV W
;
èèW X

temp_value
êê &
>>=
êê' *
$num
êê+ ,
;
êê, -
jindex
ëë "
++
ëë" $
;
ëë$ %
}
íí 
if
ìì 
(
ìì 
!
ìì 
string
ìì #
.
ìì# $
IsNullOrEmpty
ìì$ 1
(
ìì1 2
value
ìì2 7
)
ìì7 8
)
ìì8 9
ObjTemp
îî #
.
îî# $

mm_suggest
îî$ .
.
îî. /
input
îî/ 4
.
îî4 5
Add
îî5 8
(
îî8 9
value
îî9 >
)
îî> ?
;
îî? @
}
ññ 
if
óó 
(
óó 
ht
óó 
.
óó 
ContainsKey
óó &
(
óó& '
cityName
óó' /
)
óó/ 0
)
óó0 1
{
òò 
string
ôô 
newcity
ôô &
=
ôô' (
string
ôô) /
.
ôô/ 0
Empty
ôô0 5
;
ôô5 6
newcity
öö 
=
öö  !
ht
öö" $
[
öö$ %
cityName
öö% -
]
öö- .
.
öö. /
ToString
öö/ 7
(
öö7 8
)
öö8 9
;
öö9 :
string
õõ 
[
õõ 
]
õõ  
newcombinations
õõ! 0
=
õõ1 2
newcity
õõ3 :
.
õõ: ;
Split
õõ; @
(
õõ@ A
$char
õõA D
)
õõD E
;
õõE F
int
úú 
l_new
úú !
=
úú" #
newcombinations
úú$ 3
.
úú3 4
Length
úú4 :
;
úú: ;
for
ùù 
(
ùù 
int
ùù  
index
ùù! &
=
ùù' (
$num
ùù) *
;
ùù* +
index
ùù, 1
<
ùù2 3
$num
ùù4 5
<<
ùù6 8
l_new
ùù9 >
;
ùù> ?
index
ùù@ E
++
ùùE G
)
ùùG H
{
ûû 
int
üü 

temp_value
üü  *
=
üü+ ,
index
üü- 2
,
üü2 3
jindex
üü4 :
=
üü; <
$num
üü= >
;
üü> ?
string
†† "
value
††# (
=
††) *
string
††+ 1
.
††1 2
Empty
††2 7
;
††7 8
while
°° !
(
°°" #

temp_value
°°# -
>
°°. /
$num
°°0 1
)
°°1 2
{
¢¢ 
if
££  "
(
££# $
(
££$ %

temp_value
££% /
&
££0 1
$num
££2 3
)
££3 4
>
££5 6
$num
££7 8
)
££8 9
value
§§$ )
=
§§* +
string
§§, 2
.
§§2 3
Format
§§3 9
(
§§9 :
$str
§§: C
,
§§C D
value
§§E J
,
§§J K
newcombinations
§§L [
[
§§[ \
jindex
§§\ b
]
§§b c
)
§§c d
;
§§d e

temp_value
••  *
>>=
••+ .
$num
••/ 0
;
••0 1
jindex
¶¶  &
++
¶¶& (
;
¶¶( )
}
ßß 
if
®® 
(
®®  
!
®®  !
string
®®! '
.
®®' (
IsNullOrEmpty
®®( 5
(
®®5 6
value
®®6 ;
)
®®; <
)
®®< =
ObjTemp
©©  '
.
©©' (

mm_suggest
©©( 2
.
©©2 3
input
©©3 8
.
©©8 9
Add
©©9 <
(
©©< =
value
©©= B
)
©©B C
;
©©C D
}
´´ 
}
≠≠ 
ObjTemp
ØØ 
.
ØØ 

mm_suggest
ØØ &
.
ØØ& '
contexts
ØØ' /
=
ØØ0 1
new
ØØ2 5
Context
ØØ6 =
(
ØØ= >
)
ØØ> ?
;
ØØ? @
ObjTemp
∞∞ 
.
∞∞ 

mm_suggest
∞∞ &
.
∞∞& '
contexts
∞∞' /
.
∞∞/ 0
types
∞∞0 5
=
∞∞6 7
new
∞∞8 ;
List
∞∞< @
<
∞∞@ A
string
∞∞A G
>
∞∞G H
(
∞∞H I
)
∞∞I J
;
∞∞J K
ObjTemp
±± 
.
±± 

mm_suggest
±± &
.
±±& '
contexts
±±' /
.
±±/ 0
types
±±0 5
.
±±5 6
Add
±±6 9
(
±±9 :
$str
±±: C
)
±±C D
;
±±D E
objSuggestList
≤≤ "
.
≤≤" #
Add
≤≤# &
(
≤≤& '
ObjTemp
≤≤' .
)
≤≤. /
;
≤≤/ 0
count
≥≥ 
--
≥≥ 
;
≥≥ 
}
¥¥ 
}
µµ 
catch
∂∂ 
(
∂∂ 
	Exception
∂∂ 
ex
∂∂ 
)
∂∂  
{
∑∑ 
Console
∏∏ 
.
∏∏ 
	WriteLine
∏∏ !
(
∏∏! "
$str
∏∏" B
+
∏∏C D
ex
∏∏E G
.
∏∏G H
Message
∏∏H O
)
∏∏O P
;
∏∏P Q
Logs
ππ 
.
ππ 
WriteErrorLog
ππ "
(
ππ" #

MethodBase
ππ# -
.
ππ- .
GetCurrentMethod
ππ. >
(
ππ> ?
)
ππ? @
.
ππ@ A
Name
ππA E
+
ππF G
$str
ππH u
,
ππu v
ex
ππw y
)
ππy z
;
ππz {
}
∫∫ 
return
ªª 
objSuggestList
ªª !
;
ªª! "
}
ºº 	
}
ΩΩ 
}ææ ∑5
(D:\work\bikewaleweb\CityIndex\Program.cs
	namespace		 	
CityAutoSuggest		
 
{

 
class 	
Program
 
{ 
static 
void 
Main 
( 
string 
[  
]  !
args" &
)& '
{ 	
log4net 
. 
Config 
. 
XmlConfigurator *
.* +
	Configure+ 4
(4 5
)5 6
;6 7
IEnumerable 
< 
CityTempList $
>$ %
objCityList& 1
=2 3
GetCityList4 ?
.? @
CityList@ H
(H I
)I J
;J K
Logs 
. 
WriteInfoLog 
( 
$str 2
+3 4
objCityList5 @
.@ A
CountA F
(F G
)G H
)H I
;I J
IEnumerable 
< 
CityList  
>  !
CityList" *
=+ ,
GetCityList- 8
.8 9
GetSuggestList9 G
(G H
objCityListH S
)S T
;T U
CreateIndex 
( 
CityList  
)  !
;! "
} 	
private 
static 
void 
CreateIndex '
(' (
IEnumerable( 3
<3 4
CityList4 <
>< =
suggestionList> L
)L M
{ 	
try 
{ 
string 
	indexName  
=! " 
ConfigurationManager# 7
.7 8
AppSettings8 C
[C D
$strD S
]S T
;T U
ElasticClient !
client" (
=) *#
ElasticClientOperations+ B
.B C
GetElasticClientC S
(S T
)T U
;U V
if 
( 
! 
client 
.  
IndexExists  +
(+ ,
	indexName, 5
)5 6
.6 7
Exists7 =
)= >
{   
var!! 
response!! $
=!!% &
client!!' -
.!!- .
CreateIndex!!. 9
(!!9 :
	indexName!!: C
,!!C D
ind"" 
=>""  
ind""! $
.## 
Settings##  
(##  !
s##! "
=>### %
s##& '
.##' (
NumberOfShards##( 6
(##6 7
$num##7 8
)##8 9
.$$ 
NumberOfReplicas$$ ,
($$, -
$num$$- .
)$$. /
)%% 
.&& 
Mappings&& 
(&&  
m&&  !
=>&&" $
m&&% &
.'' 
Map'' 
<'' 
CityList'' '
>''' (
(''( )
type'') -
=>''. 0
type''1 5
.''5 6
AutoMap''6 =
(''= >
)''> ?
.(( 

Properties(( )
((() *
prop((* .
=>((/ 1
prop((2 6
.)) 
Nested)) %
<))% &
CitySuggestion))& 4
>))4 5
())5 6
n))6 7
=>))8 :
n**& '
.**' (
Name**( ,
(**, -
c**- .
=>**/ 1
c**2 3
.**3 4

mm_suggest**4 >
)**> ?
.++& '
AutoMap++' .
(++. /
)++/ 0
.,,& '

Properties,,' 1
(,,1 2
prop2,,2 7
=>,,8 :
prop2,,; @
.--* +
Nested--+ 1
<--1 2
Payload--2 9
>--9 :
(--: ;
n2--; =
=>--> @
n2... 0
...0 1
Name..1 5
(..5 6
c2..6 8
=>..9 ;
c2//2 4
.//4 5
input//5 :
)//: ;
.//; <
AutoMap//< C
(//C D
)//D E
)//E F
)//F G
)//G H
.00" #

Completion00# -
(00- .
c00. /
=>000 2
c003 4
.11" #
Name11# '
(11' (
pN11( *
=>11+ -
pN11. 0
.110 1

mm_suggest111 ;
)11; <
.22$ %
Contexts22% -
(22- .
cont22. 2
=>223 5
cont226 :
.33( )
Category33) 1
(331 2
cate332 6
=>337 9
cate33: >
.44, -
Name44- 1
(441 2
$str442 9
)449 :
.44: ;
Path44; ?
(44? @
s44@ A
=>44B D
s44E F
.44F G

mm_suggest44G Q
.44Q R
contexts44R Z
.44Z [
types44[ `
)44` a
)55, -
)55- .
.66" #
Analyzer66# +
(66+ ,
$str66, 6
)666 7
.77" #
SearchAnalyzer77# 1
(771 2
$str772 <
)77< =
.88" #
PreserveSeparators88# 5
(885 6
false886 ;
)88; <
)88< =
)88= >
)88> ?
)88? @
)88@ A
;88A B
}:: 
client;; 
.;; 
DeleteByQuery;; (
<;;( )
CityList;;) 1
>;;1 2
(;;2 3
dd;;3 5
=>;;6 8
dd;;9 ;
.;;; <
Index;;< A
(;;A B
	indexName;;B K
);;K L
.<< 
Type<< 
(<<  
ConfigurationManager<< 2
.<<2 3
AppSettings<<3 >
[<<> ?
$str<<? I
]<<I J
)<<J K
.== 
Query== 
(== 
qq== !
=>==" $
qq==% '
.==' (
MatchAll==( 0
(==0 1
)==1 2
)==2 3
)>> 
;>> #
ElasticClientOperationsAA +
.AA+ ,
AddDocumentAA, 7
<AA7 8
CityListAA8 @
>AA@ A
(AAA B
suggestionListAAB P
.AAP Q
ToListAAQ W
(AAW X
)AAX Y
,AAY Z
	indexNameAA[ d
,AAd e
objAAf i
=>AAj l
objAAm p
.AAp q
IdAAq s
)AAs t
;AAt u
}DD 
catchEE 
(EE 
	ExceptionEE 
exEE 
)EE  
{FF 
LogsGG 
.GG 
WriteErrorLogGG "
(GG" #

MethodBaseGG# -
.GG- .
GetCurrentMethodGG. >
(GG> ?
)GG? @
.GG@ A
NameGGA E
,GGE F
exGGG I
)GGI J
;GGJ K
ConsoleHH 
.HH 
	WriteLineHH !
(HH! "
exHH" $
.HH$ %
MessageHH% ,
)HH, -
;HH- .
}II 
}JJ 	
}LL 
}MM „
8D:\work\bikewaleweb\CityIndex\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str $
)$ %
]% &
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str &
)& '
]' (
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *