ƒ
;D:\work\bikewaleweb\Bikewale.UserReviewsReminder\Program.cs
	namespace 	
Bikewale
 
. $
UserReviewsCommunication +
{ 
class 	
Program
 
{ 
static 
void 
Main 
( 
) 
{		 	
Logs

 
.

 
WriteInfoLog

 
(

 
$str

 F
)

F G
;

G H
try 
{ 
Logs 
. 
WriteInfoLog !
(! "
$str" K
)K L
;L M
( 
new 
UserReviewMailBL %
(% &
)& '
)' (
.( )
SendReminderToUser) ;
(; <
)< =
;= >
Logs 
. 
WriteInfoLog !
(! "
$str" V
)V W
;W X
} 
catch 
( 
	Exception 
ex 
)  
{ 
Logs 
. 
WriteErrorLog "
(" #
$str# 9
+: ;
ex< >
.> ?
Message? F
)F G
;G H
} 
Logs	 
. 
WriteInfoLog 
( 
$str A
)A B
;B C
} 	
} 
} ö
KD:\work\bikewaleweb\Bikewale.UserReviewsReminder\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str <
)< =
]= >
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str >
)> ?
]? @
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *Ï+
DD:\work\bikewaleweb\Bikewale.UserReviewsReminder\UserReviewMailBL.cs
	namespace 	
Bikewale
 
. $
UserReviewsCommunication +
{ 
public 

class 
UserReviewMailBL !
{ 
private 
readonly 
UserReviewMailDAL *
userReviewMailRepo+ =
=> ?
new@ C
UserReviewMailDALD U
(U V
)V W
;W X
private 
readonly 
UrlShortner $
url% (
=) *
new+ .
UrlShortner/ :
(: ;
); <
;< =
public 
void 
SendReminderToUser &
(& '
)' (
{ 	
IEnumerable 
<  
UserReviewMailEntity ,
>, -
userList. 6
=7 8
GetCustomerMailData9 L
(L M
)M N
;N O
try 
{ 
if 
( 
userList 
!= 
null  $
)$ %
{ 
foreach   
(   
var    
user  ! %
in  & (
userList  ) 1
)  1 2
{!! 
UserReviewsEmails"" )
."") *#
SendReviewReminderEmail""* A
(""A B
user""B F
.""F G
CustomerName""G S
,""S T
user##  
.##  !
CustomerEmail##! .
,##. /
user$$  
.$$  !

ReviewLink$$! +
,$$+ ,
string%% "
.%%" #
Format%%# )
(%%) *
$str%%* ;
,%%; <
user%%= A
.%%A B
	EntryDate%%B K
)%%K L
,%%L M
user&&  
.&&  !
MakeName&&! )
,&&) *
user''  
.''  !
	ModelName''! *
)''* +
;''+ ,
}(( 
})) 
}** 
catch++ 
{,, 
Logs-- 
.-- 
WriteInfoLog-- !
(--! "
$str--" L
)--L M
;--M N
}.. 
}// 	
public55 
IEnumerable55 
<55  
UserReviewMailEntity55 /
>55/ 0
GetCustomerMailData551 D
(55D E
)55E F
{66 	
IEnumerable77 
<77  
UserReviewMailEntity77 ,
>77, -
customerEmailList77. ?
=77@ A
null77B F
;77F G
try88 
{99 
customerEmailList:: !
=::" #
userReviewMailRepo::$ 6
.::6 7
GetUserList::7 B
(::B C
)::C D
;::D E
foreach;; 
(;; 
var;; 
user;; !
in;;" $
customerEmailList;;% 6
);;6 7
{<< 
string== 
qEncoded== #
===$ % 
GetEncryptedUrlToken==& :
(==: ;
string==; A
.==A B
Format==B H
(==H I
$str	==I Õ
,>>! "
user>># '
.>>' (
ReviewId>>( 0
,>>0 1
user>>2 6
.>>6 7
MakeId>>7 =
,>>= >
user??! %
.??% &
ModelId??& -
,??- .
user??/ 3
.??3 4
OverAllRating??4 A
,??A B
user@@! %
.@@% &

CustomerId@@& 0
,@@0 1
user@@2 6
.@@6 7
PriceRangeId@@7 C
,@@C D
userAA! %
.AA% &
CustomerNameAA& 2
,AA2 3
userAA4 8
.AA8 9
CustomerEmailAA9 F
,AAF G
userBB! %
.BB% &
PageSourceIdBB& 2
,BB2 3
userBB4 8
.BB8 9
IsFakeBB9 ?
)BB? @
)BB@ A
;BBA B
stringCC 
	reviewUrlCC $
=CC% &
stringCC' -
.CC- .
FormatCC. 4
(CC4 5
$strCC5 P
,CCP Q
BWConfigurationCCR a
.CCa b
InstanceCCb j
.CCj k
	BwHostUrlCCk t
,CCt u
qEncodedCCv ~
)CC~ 
;	CC €
UrlShortnerResponseDD '
shortUrlDD( 0
=DD1 2
urlDD3 6
.DD6 7
GetShortUrlDD7 B
(DDB C
	reviewUrlDDC L
)DDL M
;DDM N
ifEE 
(EE 
shortUrlEE  
!=EE! #
nullEE$ (
)EE( )
userFF 
.FF 

ReviewLinkFF '
=FF( )
shortUrlFF* 2
.FF2 3
ShortUrlFF3 ;
;FF; <
elseGG 
userHH 
.HH 

ReviewLinkHH '
=HH( )
	reviewUrlHH* 3
;HH3 4
}II 
}JJ 
catchKK 
{LL 
LogsMM 
.MM 
WriteInfoLogMM !
(MM! "
$strMM" M
)MMM N
;MMN O
}NN 
returnOO 
customerEmailListOO $
;OO$ %
}PP 	
publicUU 
stringUU  
GetEncryptedUrlTokenUU *
(UU* +
stringUU+ 1
valueUU2 7
)UU7 8
{VV 	
stringXX 
tokenXX 
=XX 
stringXX !
.XX! "
EmptyXX" '
;XX' (
tokenZZ 
=ZZ 
UtilsZZ 
.ZZ 
UtilsZZ 
.ZZ  
EncryptTripleDESZZ  0
(ZZ0 1
valueZZ1 6
)ZZ6 7
;ZZ7 8
return\\ 
token\\ 
;\\ 
}]] 	
}__ 
}`` ¾
HD:\work\bikewaleweb\Bikewale.UserReviewsReminder\UserReviewMailEntity.cs
	namespace 	
Bikewale
 
. $
UserReviewsCommunication +
{ 
public		 

class		  
UserReviewMailEntity		 %
{

 
public 
uint 
ReviewId 
{ 
get !
;! "
set" %
;% &
}& '
public 
string 
MakeName 
{  
get  #
;# $
set$ '
;' (
}( )
public 
string 
	ModelName 
{  !
get! $
;$ %
set% (
;( )
}) *
public 
uint 

CustomerId 
{  
get  #
;# $
set$ '
;' (
}( )
public 
string 
CustomerName "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
CustomerEmail #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
	EntryDate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 

ReviewLink  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
uint 
MakeId 
{ 
get  
;  !
set" %
;% &
}' (
public 
uint 
ModelId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
OverAllRating #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
uint 
PriceRangeId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
uint 
PageSourceId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
IsFake 
{ 
get  
;  !
set" %
;% &
}' (
} 
} æ*
ED:\work\bikewaleweb\Bikewale.UserReviewsReminder\UserReviewMailDAL.cs
	namespace 	
Bikewale
 
. $
UserReviewsCommunication +
{ 
public 

class 
UserReviewMailDAL "
{ 
public 
IEnumerable 
<  
UserReviewMailEntity /
>/ 0
GetUserList1 <
(< =
)= >
{ 	
Logs 
. 
WriteInfoLog 
( 
$str 9
)9 :
;: ;
ICollection 
<  
UserReviewMailEntity ,
>, -
userList. 6
=7 8
null9 =
;= >
try 
{ 
using 
( 
	DbCommand  
cmd! $
=% &
	DbFactory' 0
.0 1
GetDBCommand1 =
(= >
)> ?
)? @
{ 
cmd   
.   
CommandType   #
=  $ %
CommandType  & 1
.  1 2
StoredProcedure  2 A
;  A B
cmd!! 
.!! 
CommandText!! #
=!!$ %
$str!!& K
;!!K L
using## 
(## 
IDataReader## &
dr##' )
=##* +
MySqlDatabase##, 9
.##9 :
SelectQuery##: E
(##E F
cmd##F I
,##I J
ConnectionType##K Y
.##Y Z
ReadOnly##Z b
)##b c
)##c d
{$$ 
if%% 
(%% 
dr%% 
!=%% !
null%%" &
)%%& '
{&& 
userList'' $
=''% &
new''' *

Collection''+ 5
<''5 6 
UserReviewMailEntity''6 J
>''J K
(''K L
)''L M
;''M N
while(( !
(((" #
dr((# %
.((% &
Read((& *
(((* +
)((+ ,
)((, -
{)) 
userList**  (
.**( )
Add**) ,
(**, -
new**- 0 
UserReviewMailEntity**1 E
{++  !
ReviewId,,$ ,
=,,- .
SqlReaderConvertor,,/ A
.,,A B
ToUInt32,,B J
(,,J K
dr,,K M
[,,M N
$str,,N X
],,X Y
),,Y Z
,,,Z [
MakeName--$ ,
=--- .
Convert--/ 6
.--6 7
ToString--7 ?
(--? @
dr--@ B
[--B C
$str--C M
]--M N
)--N O
,--O P
	ModelName..$ -
=... /
Convert..0 7
...7 8
ToString..8 @
(..@ A
dr..A C
[..C D
$str..D O
]..O P
)..P Q
,..Q R

CustomerId//$ .
=/// 0
SqlReaderConvertor//1 C
.//C D
ToUInt32//D L
(//L M
dr//M O
[//O P
$str//P \
]//\ ]
)//] ^
,//^ _
CustomerName00$ 0
=001 2
Convert003 :
.00: ;
ToString00; C
(00C D
dr00D F
[00F G
$str00G U
]00U V
)00V W
,00W X
CustomerEmail11$ 1
=112 3
Convert114 ;
.11; <
ToString11< D
(11D E
dr11E G
[11G H
$str11H W
]11W X
)11X Y
,11Y Z
	EntryDate22$ -
=22. /
SqlReaderConvertor220 B
.22B C

ToDateTime22C M
(22M N
dr22N P
[22P Q
$str22Q \
]22\ ]
)22] ^
,22^ _
MakeId33$ *
=33* +
SqlReaderConvertor33+ =
.33= >
ToUInt3233> F
(33F G
dr33G I
[33I J
$str33J R
]33R S
)33S T
,33T U
ModelId44$ +
=44+ ,
SqlReaderConvertor44, >
.44> ?
ToUInt3244? G
(44G H
dr44H J
[44J K
$str44K T
]44T U
)44U V
,44V W
OverAllRating55$ 1
=551 2
Convert552 9
.559 :
ToString55: B
(55B C
dr55C E
[55E F
$str55F U
]55U V
)55V W
,55W X
PriceRangeId66$ 0
=660 1
SqlReaderConvertor661 C
.66C D
ToUInt3266D L
(66L M
dr66M O
[66O P
$str66P ^
]66^ _
)66_ `
,66` a
PageSourceId77$ 0
=770 1
SqlReaderConvertor771 C
.77C D
ToUInt3277D L
(77L M
dr77M O
[77O P
$str77P Z
]77Z [
)77[ \
,77\ ]
IsFake88$ *
=88* +
SqlReaderConvertor88+ =
.88= >
	ToBoolean88> G
(88G H
dr88H J
[88J K
$str88K S
]88S T
)88T U
}99  !
)99! "
;99" #
}:: 
dr;; 
.;; 
Close;; $
(;;$ %
);;% &
;;;& '
}<< 
}== 
}>> 
}?? 
catch@@ 
{AA 
LogsBB 
.BB 
WriteInfoLogBB !
(BB! "
$strBB" B
)BBB C
;BBC D
}CC 
LogsDD 
.DD 
WriteInfoLogDD 
(DD 
$strDD G
)DDG H
;DDH I
returnEE 
userListEE 
;EE 
}FF 	
}II 
}KK 