àp
3D:\work\bikewaleweb\BikewaleOpr.Cache\BwMemCache.cs
	namespace 	
BikewaleOpr
 
. 
Cache 
{ 
public

 

class

 

BwMemCache

 
{ 
public 
static 
bool %
ClearPopularBikesCacheKey 4
(4 5
uint5 9
?9 :
topCount; C
=D E
nullF J
,J K
uintL P
?P Q
makeIdR X
=Y Z
null[ _
)_ `
{ 	
bool 
cacheKeyClearStatus $
=% &
false' ,
;, -
try 
{ 
string 
key 
; 
key 
= 
string 
. 
Format #
(# $
$str$ 5
+6 7
(8 9
topCount9 A
.A B
HasValueB J
?K L
StringM S
.S T
FormatT Z
(Z [
$str[ d
,d e
topCountf n
.n o
Valueo t
)t u
:v w
$strx z
)z {
+| }
(~ 
makeId	 Ö
.
Ö Ü
HasValue
Ü é
?
è ê
String
ë ó
.
ó ò
Format
ò û
(
û ü
$str
ü ®
,
® ©
makeId
™ ∞
.
∞ ±
Value
± ∂
)
∂ ∑
:
∏ π
$str
∫ º
)
º Ω
)
Ω æ
;
æ ø
MemCachedUtil 
. 
Remove $
($ %
key% (
)( )
;) *
cacheKeyClearStatus #
=$ %
true& *
;* +
} 
catch 
( 
	Exception 
ex 
)  
{ 

ErrorClass 
objErr !
=" #
new$ '

ErrorClass( 2
(2 3
ex3 5
,5 6
string7 =
.= >
Format> D
(D E
$str	E ã
,
ã å
topCount
ç ï
,
ï ñ
makeId
ó ù
)
ù û
)
û ü
;
ü †
} 
return 
cacheKeyClearStatus &
;& '
} 	
public%% 
static%% 
bool%% &
ClearUpcomingBikesCacheKey%% 5
(%%5 6
int%%6 9
pageSize%%: B
,%%B C
int%%D G
sortBy%%H N
,%%N O
uint%%P T
?%%T U
makeId%%V \
,%%\ ]
uint%%^ b
?%%b c
modelId%%d k
)%%k l
{&& 	
bool'' 
cacheKeyClearStatus'' $
=''% &
false''' ,
;'', -
try(( 
{)) 
string** 
key** 
=** 
string** #
.**# $
Empty**$ )
;**) *
key++ 
=++ 
string++ 
.++ 
Format++ #
(++# $
$str++$ E
,++E F
pageSize++G O
,++O P
sortBy++Q W
)++W X
;++X Y
if,, 
(,, 
makeId,, 
.,, 
HasValue,, #
&&,,$ &
makeId,,' -
.,,- .
Value,,. 3
>,,4 5
$num,,6 7
),,7 8
key-- 
+=-- 
$str-- !
+--" #
makeId--$ *
;--* +
if.. 
(.. 
modelId.. 
... 
HasValue.. $
&&..% '
modelId..( /
.../ 0
Value..0 5
>..6 7
$num..8 9
)..9 :
key// 
+=// 
$str// !
+//" #
modelId//$ +
;//+ ,
MemCachedUtil00 
.00 
Remove00 $
(00$ %
key00% (
)00( )
;00) *
cacheKeyClearStatus11 #
=11$ %
true11& *
;11* +
}22 
catch33 
(33 
	Exception33 
ex33 
)33  
{44 

ErrorClass55 
objErr55 !
=55" #
new55$ '

ErrorClass55( 2
(552 3
ex553 5
,555 6
string557 =
.55= >
Format55> D
(55D E
$str	55E å
+
55ç é
(
55è ê
makeId
55ê ñ
.
55ñ ó
HasValue
55ó ü
?
55† °
String
55¢ ®
.
55® ©
Format
55© Ø
(
55Ø ∞
$str
55∞ ∑
,
55∑ ∏
makeId
55π ø
.
55ø ¿
Value
55¿ ≈
)
55≈ ∆
:
55« »
$str
55… À
)
55À Ã
+
55Õ Œ
(
55œ –
modelId
55– ◊
.
55◊ ÿ
HasValue
55ÿ ‡
?
55· ‚
String
55„ È
.
55È Í
Format
55Í 
(
55 Ò
$str
55Ò ¯
,
55¯ ˘
modelId
55˙ Å
.
55Å Ç
Value
55Ç á
)
55á à
:
55â ä
$str
55ã ç
)
55ç é
,
55é è
pageSize
55ê ò
,
55ò ô
sortBy
55ö †
)
55† °
)
55° ¢
;
55¢ £
}66 
return77 
cacheKeyClearStatus77 &
;77& '
}88 	
public@@ 
static@@ 
bool@@ !
ClearNewLaunchesBikes@@ 0
(@@0 1
string@@1 7
cityId@@8 >
)@@> ?
{AA 	
boolBB 
cacheKeyClearStatusBB $
=BB% &
falseBB' ,
;BB, -
tryCC 
{DD 
stringEE 
keyEE 
=EE 
StringEE #
.EE# $
FormatEE$ *
(EE* +
$strEE+ H
,EEH I
cityIdEEJ P
)EEP Q
;EEQ R
MemCachedUtilFF 
.FF 
RemoveFF $
(FF$ %
keyFF% (
)FF( )
;FF) *
}GG 
catchHH 
(HH 
	ExceptionHH 
exHH 
)HH  
{II 

ErrorClassJJ 
objErrJJ !
=JJ" #
newJJ$ '

ErrorClassJJ( 2
(JJ2 3
exJJ3 5
,JJ5 6
stringJJ7 =
.JJ= >
FormatJJ> D
(JJD E
$str	JJE Ç
,
JJÇ É
cityId
JJÑ ä
)
JJä ã
)
JJã å
;
JJå ç
}KK 
returnLL 
cacheKeyClearStatusLL &
;LL& '
}MM 	
publicOO 
staticOO 
voidOO 
ClearVersionPriceOO ,
(OO, -
stringOO- 3
modelOO4 9
,OO9 :
stringOO; A
cityOOB F
)OOF G
{PP 	
tryQQ 
{RR 
stringSS 
keySS 
=SS 
StringSS #
.SS# $
FormatSS$ *
(SS* +
$strSS+ G
,SSG H
modelSSI N
,SSN O
citySSP T
)SST U
;SSU V
MemCachedUtilTT 
.TT 
RemoveTT $
(TT$ %
keyTT% (
)TT( )
;TT) *
}UU 
catchVV 
(VV 
	ExceptionVV 
exVV 
)VV  
{WW 

ErrorClassXX 
objErrXX !
=XX" #
newXX$ '

ErrorClassXX( 2
(XX2 3
exXX3 5
,XX5 6
stringXX7 =
.XX= >
FormatXX> D
(XXD E
$str	XXE É
,
XXÉ Ñ
city
XXÖ â
,
XXâ ä
model
XXã ê
)
XXê ë
)
XXë í
;
XXí ì
}YY 
}ZZ 	
public`` 
static`` 
void`` !
ClearUserReviewsCache`` 0
(``0 1
)``1 2
{aa 	
trybb 
{cc 
MemCachedUtildd 
.dd 
Removedd $
(dd$ %
$strdd% 5
)dd5 6
;dd6 7
}ee 
catchff 
(ff 
	Exceptionff 
exff 
)ff  
{gg 

ErrorClasshh 
objErrhh !
=hh" #
newhh$ '

ErrorClasshh( 2
(hh2 3
exhh3 5
,hh5 6
$strhh7 N
)hhN O
;hhO P
}ii 
}jj 	
publicqq 
staticqq 
voidqq 
ClearPriceQuoteCityqq .
(qq. /
uintqq/ 3
modelIdqq4 ;
)qq; <
{rr 	
tryss 
{tt 
MemCachedUtiluu 
.uu 
Removeuu $
(uu$ %
stringuu% +
.uu+ ,
Formatuu, 2
(uu2 3
$struu3 B
,uuB C
modelIduuD K
)uuK L
)uuL M
;uuM N
}vv 
catchww 
(ww 
	Exceptionww 
exww 
)ww  
{xx 

ErrorClassyy 
objErryy !
=yy" #
newyy$ '

ErrorClassyy( 2
(yy2 3
exyy3 5
,yy5 6
$stryy7 i
)yyi j
;yyj k
}zz 
}{{ 	
public
ÇÇ 
static
ÇÇ 
void
ÇÇ !
ClearVersionDetails
ÇÇ .
(
ÇÇ. /
uint
ÇÇ/ 3
modelId
ÇÇ4 ;
)
ÇÇ; <
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ 
MemCachedUtil
ÜÜ 
.
ÜÜ 
Remove
ÜÜ $
(
ÜÜ$ %
string
ÜÜ% +
.
ÜÜ+ ,
Format
ÜÜ, 2
(
ÜÜ2 3
$str
ÜÜ3 J
,
ÜÜJ K
modelId
ÜÜL S
)
ÜÜS T
)
ÜÜT U
;
ÜÜU V
}
áá 
catch
àà 
(
àà 
	Exception
àà 
ex
àà 
)
àà  
{
ââ 

ErrorClass
ää 
objErr
ää !
=
ää" #
new
ää$ '

ErrorClass
ää( 2
(
ää2 3
ex
ää3 5
,
ää5 6
$str
ää7 i
)
ääi j
;
ääj k
}
ãã 
}
åå 	
public
ìì 
static
ìì 
void
ìì &
ClearPopularBikesByMakes
ìì 3
(
ìì3 4
uint
ìì4 8
makeId
ìì9 ?
)
ìì? @
{
îî 	
try
ïï 
{
ññ 
MemCachedUtil
óó 
.
óó 
Remove
óó $
(
óó$ %
string
óó% +
.
óó+ ,
Format
óó, 2
(
óó2 3
$str
óó3 N
,
óóN O
makeId
óóP V
)
óóV W
)
óóW X
;
óóX Y
}
òò 
catch
ôô 
(
ôô 
	Exception
ôô 
ex
ôô 
)
ôô  
{
öö 

ErrorClass
õõ 
objErr
õõ !
=
õõ" #
new
õõ$ '

ErrorClass
õõ( 2
(
õõ2 3
ex
õõ3 5
,
õõ5 6
$str
õõ7 n
)
õõn o
;
õõo p
}
úú 
}
ùù 	
public
££ 
static
££ 
void
££  
ClearUpcomingBikes
££ -
(
££- .
)
££. /
{
§§ 	
try
•• 
{
¶¶ 
MemCachedUtil
ßß 
.
ßß 
Remove
ßß $
(
ßß$ %
$str
ßß% 8
)
ßß8 9
;
ßß9 :
}
®® 
catch
©© 
(
©© 
	Exception
©© 
ex
©© 
)
©©  
{
™™ 

ErrorClass
´´ 
objErr
´´ !
=
´´" #
new
´´$ '

ErrorClass
´´( 2
(
´´2 3
ex
´´3 5
,
´´5 6
$str
´´7 h
)
´´h i
;
´´i j
}
¨¨ 
}
≠≠ 	
public
¥¥ 
static
¥¥ 
void
¥¥  
ClearVersionByType
¥¥ -
(
¥¥- .
UInt32
¥¥. 4
modelId
¥¥5 <
)
¥¥< =
{
µµ 	
try
∂∂ 
{
∑∑ 
MemCachedUtil
∏∏ 
.
∏∏ 
Remove
∏∏ $
(
∏∏$ %
string
∏∏% +
.
∏∏+ ,
Format
∏∏, 2
(
∏∏2 3
$str
∏∏3 Q
,
∏∏Q R
$num
∏∏S T
,
∏∏T U
modelId
∏∏V ]
)
∏∏] ^
)
∏∏^ _
;
∏∏_ `
MemCachedUtil
ππ 
.
ππ 
Remove
ππ $
(
ππ$ %
string
ππ% +
.
ππ+ ,
Format
ππ, 2
(
ππ2 3
$str
ππ3 Q
,
ππQ R
$num
ππS T
,
ππT U
modelId
ππV ]
)
ππ] ^
)
ππ^ _
;
ππ_ `
MemCachedUtil
∫∫ 
.
∫∫ 
Remove
∫∫ $
(
∫∫$ %
string
∫∫% +
.
∫∫+ ,
Format
∫∫, 2
(
∫∫2 3
$str
∫∫3 Q
,
∫∫Q R
$num
∫∫S T
,
∫∫T U
modelId
∫∫V ]
)
∫∫] ^
)
∫∫^ _
;
∫∫_ `
MemCachedUtil
ªª 
.
ªª 
Remove
ªª $
(
ªª$ %
string
ªª% +
.
ªª+ ,
Format
ªª, 2
(
ªª2 3
$str
ªª3 Q
,
ªªQ R
$num
ªªS U
,
ªªU V
modelId
ªªW ^
)
ªª^ _
)
ªª_ `
;
ªª` a
}
ºº 
catch
ΩΩ 
(
ΩΩ 
	Exception
ΩΩ 
ex
ΩΩ 
)
ΩΩ  
{
ææ 

ErrorClass
øø 
objErr
øø !
=
øø" #
new
øø$ '

ErrorClass
øø( 2
(
øø2 3
ex
øø3 5
,
øø5 6
$str
øø7 h
)
øøh i
;
øøi j
}
¿¿ 
}
¡¡ 	
public
»» 
static
»» 
void
»» *
ClearPopularBikesByBodyStyle
»» 7
(
»»7 8
ushort
»»8 >
bodyStyleId
»»? J
)
»»J K
{
…… 	
try
   
{
ÀÀ 
MemCachedUtil
ÃÃ 
.
ÃÃ 
Remove
ÃÃ $
(
ÃÃ$ %
string
ÃÃ% +
.
ÃÃ+ ,
Format
ÃÃ, 2
(
ÃÃ2 3
$str
ÃÃ3 `
,
ÃÃ` a
bodyStyleId
ÃÃb m
)
ÃÃm n
)
ÃÃn o
;
ÃÃo p
}
ÕÕ 
catch
ŒŒ 
(
ŒŒ 
	Exception
ŒŒ 
ex
ŒŒ 
)
ŒŒ  
{
œœ 

ErrorClass
–– 
objErr
–– !
=
––" #
new
––$ '

ErrorClass
––( 2
(
––2 3
ex
––3 5
,
––5 6
$str
––7 r
)
––r s
;
––s t
}
—— 
}
““ 	
}
‘‘ 
}’’ Ó
6D:\work\bikewaleweb\BikewaleOpr.Cache\MemCachedUtil.cs
	namespace 	
BikewaleOpr
 
. 
Cache 
{ 
public 

static 
class 
MemCachedUtil %
{ 
static 
MemcachedClient 
_mc "
=# $
null% )
;) *
static 
MemCachedUtil 
( 
) 
{ 	
try 
{ 
if 
( 
_mc 
== 
null 
)  
{ 
_mc 
= 
new 
MemcachedClient -
(- .
$str. 9
)9 :
;: ;
} 
} 
catch 
( 
	Exception 
ex 
)  
{ 

ErrorClass 
objErr !
=" #
new$ '

ErrorClass( 2
(2 3
ex3 5
,5 6
$str7 h
)h i
;i j
} 
} 	
public 
static 
void 
Remove !
(! "
string" (
key) ,
), -
{ 	
try   
{!! 
_mc"" 
."" 
Remove"" 
("" 
key"" 
)"" 
;""  
}## 
catch$$ 
($$ 
	Exception$$ 
ex$$ 
)$$  
{%% 

ErrorClass&& 
objErr&& !
=&&" #
new&&$ '

ErrorClass&&( 2
(&&2 3
ex&&3 5
,&&5 6
$str&&7 _
)&&_ `
;&&` a
}'' 
}(( 	
})) 
}** Î
@D:\work\bikewaleweb\BikewaleOpr.Cache\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str ,
), -
]- .
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str .
). /
]/ 0
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *ë
ED:\work\bikewaleweb\BikewaleOpr.Cache\UserReviews\UserReviewsCache.cs
	namespace 	
BikewaleOpr
 
. 
Cache 
. 
UserReviews '
{ 
public 

class 
UserReviewsCache !
:" #
IUserReviewsCache$ 5
{ 
private 
readonly 
ICacheManager &
_cache' -
;- .
private 
readonly "
IUserReviewsRepository /
_userReviewsRepo0 @
;@ A
public 
UserReviewsCache 
(  
ICacheManager  -
cache. 3
,3 4"
IUserReviewsRepository5 K
userReviewsRepoL [
)[ \
{ 	
_cache 
= 
cache 
; 
_userReviewsRepo 
= 
userReviewsRepo .
;. /
} 	
public%% 
IEnumerable%% 
<%% 
DiscardReasons%% )
>%%) *(
GetUserReviewsDiscardReasons%%+ G
(%%G H
)%%H I
{&& 	
IEnumerable'' 
<'' 
DiscardReasons'' &
>''& '

objReasons''( 2
=''3 4
null''5 9
;''9 :
try)) 
{** 

objReasons++ 
=++ 
_cache++ #
.++# $
GetFromCache++$ 0
<++0 1
IEnumerable++1 <
<++< =
DiscardReasons++= K
>++K L
>++L M
(++M N
$str++N l
,++l m
new++n q
TimeSpan++r z
(++z {
$num++{ |
,++| }
$num++~ 
,	++ Ä
$num
++Å Ç
,
++Ç É
$num
++Ñ Ö
)
++Ö Ü
,
++Ü á
(
++à â
)
++â ä
=>
++ã ç
_userReviewsRepo
++é û
.
++û ü*
GetUserReviewsDiscardReasons
++ü ª
(
++ª º
)
++º Ω
)
++Ω æ
;
++æ ø
},, 
catch-- 
(-- 
	Exception-- 
ex-- 
)--  
{.. 

ErrorClass// 
objErr// !
=//" #
new//$ '

ErrorClass//( 2
(//2 3
ex//3 5
,//5 6
$str//7 g
)//g h
;//h i
}00 
return22 

objReasons22 
;22 
}44 	
}66 
}77 