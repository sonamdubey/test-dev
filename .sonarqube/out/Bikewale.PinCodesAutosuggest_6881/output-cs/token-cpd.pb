Ø`
DD:\work\bikewaleweb\Bikewale.PinCodesAutosuggest\GetPinCodeListDb.cs
	namespace

 	
Bikewale


 
.

 
PinCodesAutosuggest

 &
{ 
public 

class 
GetPinCodeListDb !
{ 
private 
static 
string 
_con "
=# $ 
ConfigurationManager% 9
.9 :
AppSettings: E
[E F
$strF `
]` a
;a b
public 
static 
IEnumerable !
<! "
PayLoad" )
>) *
GetPinCodeList+ 9
(9 :
): ;
{ 	
IList 
< 
PayLoad 
> 
lstPinCodes &
=' (
null) -
;- .
try 
{ 
using 
( 
	DbCommand  
cmd! $
=% &
	DbFactory' 0
.0 1
GetDBCommand1 =
(= >
$str> N
)N O
)O P
{   
cmd!! 
.!! 
CommandType!! #
=!!$ %
CommandType!!& 1
.!!1 2
StoredProcedure!!2 A
;!!A B
cmd"" 
."" 

Parameters"" "
.""" #
Add""# &
(""& '
	DbFactory""' 0
.""0 1

GetDbParam""1 ;
(""; <
$str""< P
,""P Q
DbType""R X
.""X Y
Int32""Y ^
,""^ _
$num""` a
)""a b
)""b c
;""c d
using## 
(## 
IDataReader## &
reader##' -
=##. /
MySqlDatabase##0 =
.##= >
SelectQuery##> I
(##I J
cmd##J M
,##M N
ConnectionType##O ]
.##] ^
ReadOnly##^ f
)##f g
)##g h
{$$ 
if%% 
(%% 
reader%% "
!=%%# %
null%%& *
)%%* +
{&& 
lstPinCodes'' '
=''( )
new''* -
List''. 2
<''2 3
PayLoad''3 :
>'': ;
(''; <
)''< =
;''= >
while(( !
(((" #
reader((# )
.(() *
Read((* .
(((. /
)((/ 0
)((0 1
{)) 
PayLoad**  '
pinCode**( /
=**0 1
new**2 5
PayLoad**6 =
(**= >
)**> ?
;**? @
pinCode++  '
.++' (
	PinCodeId++( 1
=++2 3
Convert++4 ;
.++; <
ToUInt32++< D
(++D E
reader++E K
[++K L
$str++L P
]++P Q
)++Q R
;++R S
pinCode,,  '
.,,' (
PinCode,,( /
=,,0 1
Convert,,2 9
.,,9 :
ToString,,: B
(,,B C
reader,,C I
[,,I J
$str,,J S
],,S T
),,T U
;,,U V
pinCode--  '
.--' (
District--( 0
=--1 2
Convert--3 :
.--: ;
ToString--; C
(--C D
reader--D J
[--J K
$str--K U
]--U V
)--V W
;--W X
pinCode..  '
...' (
Taluka..( .
=../ 0
Convert..1 8
...8 9
ToString..9 A
(..A B
reader..B H
[..H I
$str..I Q
]..Q R
)..R S
;..S T
pinCode//  '
.//' (
Area//( ,
=//- .
Convert/// 6
.//6 7
ToString//7 ?
(//? @
reader//@ F
[//F G
$str//G M
]//M N
)//N O
;//O P
pinCode00  '
.00' (
State00( -
=00. /
Convert000 7
.007 8
ToString008 @
(00@ A
reader00A G
[00G H
$str00H O
]00O P
)00P Q
;00Q R
pinCode11  '
.11' (
Region11( .
=11/ 0
Convert111 8
.118 9
ToString119 A
(11A B
reader11B H
[11H I
$str11I Q
]11Q R
)11R S
;11S T
lstPinCodes22  +
.22+ ,
Add22, /
(22/ 0
pinCode220 7
)227 8
;228 9
}33 
reader44 "
.44" #
Close44# (
(44( )
)44) *
;44* +
}55 
}66 
}77 
}88 
catch99 
(99 
	Exception99 
ex99 
)99  
{:: 
Logs;; 
.;; 
WriteErrorLog;; "
(;;" #

MethodBase;;# -
.;;- .
GetCurrentMethod;;. >
(;;> ?
);;? @
.;;@ A
Name;;A E
,;;E F
ex;;G I
);;I J
;;;J K
Console<< 
.<< 
	WriteLine<< !
(<<! "
$str<<" 9
+<<: ;
ex<<< >
.<<> ?
Message<<? F
)<<F G
;<<G H
}== 
return?? 
lstPinCodes?? 
;?? 
}@@ 	
publicHH 
staticHH 
IEnumerableHH !
<HH! "
PinCodeListHH" -
>HH- .
GetSuggestListHH/ =
(HH= >
IEnumerableHH> I
<HHI J
PayLoadHHJ Q
>HHQ R
objPinCodesHHS ^
)HH^ _
{II 	
IListJJ 
<JJ 
PinCodeListJJ 
>JJ 
objSuggestListJJ -
=JJ. /
nullJJ0 4
;JJ4 5
intLL 
countLL 
=LL 
objPinCodesLL #
.LL# $
CountLL$ )
(LL) *
)LL* +
;LL+ ,
tryMM 
{NN 
objSuggestListOO 
=OO  
newOO! $
ListOO% )
<OO) *
PinCodeListOO* 5
>OO5 6
(OO6 7
)OO7 8
;OO8 9
foreachPP 
(PP 
varPP 
pinCodePP $
inPP% '
objPinCodesPP( 3
)PP3 4
{QQ 
PinCodeListRR 
ObjTempRR  '
=RR( )
newRR* -
PinCodeListRR. 9
(RR9 :
)RR: ;
;RR; <
ObjTempTT 
.TT 
IdTT 
=TT  
ConvertTT! (
.TT( )
ToStringTT) 1
(TT1 2
pinCodeTT2 9
.TT9 :
	PinCodeIdTT: C
)TTC D
;TTD E
ObjTempUU 
.UU 
nameUU  
=UU! "
stringUU# )
.UU) *
FormatUU* 0
(UU0 1
$strUU1 :
,UU: ;
pinCodeUU< C
.UUC D
	PinCodeIdUUD M
,UUM N
pinCodeUUO V
.UUV W
PinCodeUUW ^
)UU^ _
;UU_ `
stringVV 
displayNameVV &
=VV' (
stringVV) /
.VV/ 0
FormatVV0 6
(VV6 7
$strVV7 G
,VVG H
pinCodeVVI P
.VVP Q
PinCodeVVQ X
,VVX Y
pinCodeVVZ a
.VVa b
AreaVVb f
,VVf g
pinCodeVVh o
.VVo p
DistrictVVp x
)VVx y
;VVy z
ObjTempXX 
.XX 

mm_suggestXX &
=XX' (
newXX) ,
PinCodeSuggestionXX- >
(XX> ?
)XX? @
;XX@ A
ObjTempYY 
.YY 
outputYY "
=YY# $
displayNameYY% 0
;YY0 1
ObjTemp[[ 
.[[ 
payload[[ #
=[[$ %
pinCode[[& -
;[[- .
ObjTemp]] 
.]] 

mm_suggest]] &
.]]& '
Weight]]' -
=]]. /
count]]0 5
;]]5 6
ObjTemp__ 
.__ 

mm_suggest__ &
.__& '
input__' ,
=__- .
new__/ 2
List__3 7
<__7 8
string__8 >
>__> ?
(__? @
)__@ A
;__A B
stringbb 
	tokenNamebb $
=bb% &
stringbb' -
.bb- .
Formatbb. 4
(bb4 5
$strbb5 B
,bbB C
pinCodebbD K
.bbK L
PinCodebbL S
,bbS T
pinCodebbU \
.bb\ ]
Areabb] a
,bba b
pinCodebbc j
.bbj k
Districtbbk s
)bbs t
;bbt u
vardd 
tokensdd 
=dd  
	tokenNamedd! *
.dd* +
Splitdd+ 0
(dd0 1
$chardd1 4
)dd4 5
;dd5 6
intee 
lengthee 
=ee  
Mathee! %
.ee% &
Minee& )
(ee) *
tokensee* 0
.ee0 1
Lengthee1 7
,ee7 8
$numee8 9
)ee9 :
;ee: ;
ObjTemphh 
.hh 

mm_suggesthh &
.hh& '
inputhh' ,
=hh- .
newhh/ 2
Listhh3 7
<hh7 8
stringhh8 >
>hh> ?
(hh? @
)hh@ A
;hhA B
forkk 
(kk 
intkk 
indexkk "
=kk# $
$numkk% &
;kk& '
indexkk( -
<kk. /
$numkk0 1
<<kk2 4
lengthkk5 ;
;kk; <
indexkk= B
++kkB D
)kkD E
{ll 
intmm 

temp_valuemm &
=mm' (
indexmm) .
,mm. /
jindexmm0 6
=mm7 8
$nummm9 :
;mm: ;
stringnn 
valuenn $
=nn% &
stringnn' -
.nn- .
Emptynn. 3
;nn3 4
whileoo 
(oo 

temp_valueoo )
>oo* +
$numoo, -
)oo- .
{pp 
ifqq 
(qq  
(qq  !

temp_valueqq! +
&qq, -
$numqq. /
)qq/ 0
>qq1 2
$numqq3 4
)qq4 5
valuerr  %
=rr& '
stringrr( .
.rr. /
Formatrr/ 5
(rr5 6
$strrr6 ?
,rr? @
valuerrA F
,rrF G
tokensrrH N
[rrN O
jindexrrO U
]rrU V
)rrV W
;rrW X

temp_valuess &
>>=ss' *
$numss+ ,
;ss, -
jindextt "
++tt" $
;tt$ %
}uu 
ifvv 
(vv 
!vv 
stringvv #
.vv# $
IsNullOrEmptyvv$ 1
(vv1 2
valuevv2 7
)vv7 8
)vv8 9
ObjTempww #
.ww# $

mm_suggestww$ .
.ww. /
inputww/ 4
.ww4 5
Addww5 8
(ww8 9
valueww9 >
)ww> ?
;ww? @
}yy 
ObjTemp{{ 
.{{ 

mm_suggest{{ &
.{{& '
contexts{{' /
={{0 1
new{{2 5
Context{{6 =
({{= >
){{> ?
;{{? @
ObjTemp|| 
.|| 

mm_suggest|| &
.||& '
contexts||' /
.||/ 0
types||0 5
=||6 7
new||8 ;
List||< @
<||@ A
string||A G
>||G H
(||H I
)||I J
;||J K
ObjTemp}} 
.}} 

mm_suggest}} &
.}}& '
contexts}}' /
.}}/ 0
types}}0 5
.}}5 6
Add}}6 9
(}}9 :
$str}}: H
)}}H I
;}}I J
objSuggestList~~ "
.~~" #
Add~~# &
(~~& '
ObjTemp~~' .
)~~. /
;~~/ 0
count 
-- 
; 
}
ÄÄ 
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ 
	Exception
ÇÇ 
ex
ÇÇ 
)
ÇÇ  
{
ÉÉ 
Console
ÑÑ 
.
ÑÑ 
	WriteLine
ÑÑ !
(
ÑÑ! "
$str
ÑÑ" B
+
ÑÑC D
ex
ÑÑE G
.
ÑÑG H
Message
ÑÑH O
)
ÑÑO P
;
ÑÑP Q
Logs
ÖÖ 
.
ÖÖ 
WriteErrorLog
ÖÖ "
(
ÖÖ" #

MethodBase
ÖÖ# -
.
ÖÖ- .
GetCurrentMethod
ÖÖ. >
(
ÖÖ> ?
)
ÖÖ? @
.
ÖÖ@ A
Name
ÖÖA E
+
ÖÖF G
$strÖÖH É
,ÖÖÉ Ñ
exÖÖÖ á
)ÖÖá à
;ÖÖà â
}
ÜÜ 
return
áá 
objSuggestList
áá !
;
áá! "
}
àà 	
}
åå 
}çç Ó
?D:\work\bikewaleweb\Bikewale.PinCodesAutosuggest\PinCodeList.cs
	namespace 	
Bikewale
 
. 
PinCodesAutosuggest &
{ 
public		 

class		 
PinCodeList		 
{

 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
public 
PinCodeSuggestion  

mm_suggest! +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
string 
output 
{ 
get "
;" #
set$ '
;' (
}) *
public 
PayLoad 
payload 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
name 
{ 
get  
;  !
set" %
;% &
}' (
} 
public 

class 
Context 
{ 
public 
IList 
< 
string 
> 
types "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
public 

class 
PinCodeSuggestion "
{ 
public 
IList 
< 
string 
> 
input "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
int 
Weight 
{ 
get 
;  
set! $
;$ %
}& '
public!! 
Context!! 
contexts!! 
{!!  !
get!!" %
;!!% &
set!!' *
;!!* +
}!!, -
}"" 
public)) 

class)) 
PayLoad)) 
{** 
public++ 
uint++ 
	PinCodeId++ 
{++ 
get++  #
;++# $
set++% (
;++( )
}++* +
public,, 
string,, 
PinCode,, 
{,, 
get,,  #
;,,# $
set,,% (
;,,( )
},,* +
public-- 
string-- 
Circle-- 
{-- 
get-- "
;--" #
set--$ '
;--' (
}--) *
public.. 
string.. 
Area.. 
{.. 
get..  
;..  !
set.." %
;..% &
}..' (
public// 
string// 
Taluka// 
{// 
get// "
;//" #
set//$ '
;//' (
}//) *
public00 
string00 
Division00 
{00  
get00! $
;00$ %
set00& )
;00) *
}00+ ,
public11 
string11 
State11 
{11 
get11 !
;11! "
set11# &
;11& '
}11( )
public22 
string22 
District22 
{22  
get22! $
;22$ %
set22& )
;22) *
}22+ ,
public33 
string33 
Region33 
{33 
get33 "
;33" #
set33$ '
;33' (
}33) *
}44 
}55 ôL
;D:\work\bikewaleweb\Bikewale.PinCodesAutosuggest\Program.cs
	namespace 	
Bikewale
 
. 
PinCodesAutosuggest &
{ 
public		 

class		 
Program		 
{

 
static 
void 
Main 
( 
string 
[  
]  !
args" &
)& '
{ 	
try 
{ 
log4net 
. 
Config 
. 
XmlConfigurator .
.. /
	Configure/ 8
(8 9
)9 :
;: ;
IEnumerable 
< 
PayLoad #
># $
objList% ,
=- .
GetPinCodeListDb/ ?
.? @
GetPinCodeList@ N
(N O
)O P
;P Q
if 
( 
objList 
!= 
null #
)# $
{ 
Logs 
. 
WriteInfoLog %
(% &
$str& <
+= >
objList? F
.F G
CountG L
(L M
)M N
)N O
;O P
IEnumerable 
<  
PinCodeList  +
>+ ,
suggestionList- ;
=< =
GetPinCodeListDb> N
.N O
GetSuggestListO ]
(] ^
objList^ e
)e f
;f g
CreateIndex 
(  
suggestionList  .
). /
;/ 0
Logs 
. 
WriteInfoLog %
(% &
$str& Q
)Q R
;R S
}   
else!! 
{"" 
Logs## 
.## 
WriteInfoLog## %
(##% &
$str##& ]
)##] ^
;##^ _
}$$ 
}%% 
catch&& 
(&& 
	Exception&& 
ex&& 
)&&  
{'' 
Logs(( 
.(( 
WriteErrorLog(( "
(((" #
$str((# N
,((N O
ex((P R
)((R S
;((S T
Console)) 
.)) 
	WriteLine)) !
())! "
ex))" $
.))$ %
Message))% ,
))), -
;))- .
}** 
}.. 	
private66 
static66 
void66 
CreateIndex66 '
(66' (
IEnumerable66( 3
<663 4
PinCodeList664 ?
>66? @
suggestionList66A O
)66O P
{77 	
try88 
{99 
bool:: 
isUpdateOperation:: &
=::' (
Boolean::) 0
.::0 1
Parse::1 6
(::6 7
System::7 =
.::= >
Configuration::> K
.::K L 
ConfigurationManager::L `
.::` a
AppSettings::a l
[::l m
$str::m w
]::w x
)::x y
;::y z
string;; 
NewIndexName;; #
=;;$ %
System;;& ,
.;;, -
Configuration;;- :
.;;: ; 
ConfigurationManager;;; O
.;;O P
AppSettings;;P [
[;;[ \
$str;;\ j
];;j k
;;;k l
if>> 
(>> 
isUpdateOperation>> %
)>>% &
{?? #
ElasticClientOperations@@ +
.@@+ ,
AddDocument@@, 7
<@@7 8
PinCodeList@@8 C
>@@C D
(@@D E
suggestionList@@E S
.@@S T
ToList@@T Z
(@@Z [
)@@[ \
,@@\ ]
NewIndexName@@^ j
,@@j k
s@@l m
=>@@n p
s@@q r
.@@r s
Id@@s u
)@@u v
;@@v w
}AA 
elseBB 
{CC 
varDD 
OldIndexNameDD $
=DD% &
SystemDD' -
.DD- .
ConfigurationDD. ;
.DD; < 
ConfigurationManagerDD< P
.DDP Q
AppSettingsDDQ \
[DD\ ]
$strDD] k
]DDk l
;DDl m
varEE 
aliasIndexNameEE &
=EE' (
SystemEE) /
.EE/ 0
ConfigurationEE0 =
.EE= > 
ConfigurationManagerEE> R
.EER S
AppSettingsEES ^
[EE^ _
$strEE_ j
]EEj k
;EEk l
boolFF 
isDeleteOldIndexFF )
=FF* +
BooleanFF, 3
.FF3 4
ParseFF4 9
(FF9 :
SystemFF: @
.FF@ A
ConfigurationFFA N
.FFN O 
ConfigurationManagerFFO c
.FFc d
AppSettingsFFd o
[FFo p
$str	FFp Ç
]
FFÇ É
)
FFÉ Ñ
;
FFÑ Ö
ElasticClientII !
clientII" (
=II) *#
ElasticClientOperationsII+ B
.IIB C
GetElasticClientIIC S
(IIS T
)IIT U
;IIU V
varKK 
responseKK $
=KK% &
clientKK' -
.KK- .
CreateIndexKK. 9
(KK9 :
NewIndexNameKK: F
,KKF G
indLL 
=>LL  
indLL! $
.MM 
SettingsMM  
(MM  !
sMM! "
=>MM# %
sMM& '
.MM' (
NumberOfShardsMM( 6
(MM6 7
$numMM7 8
)MM8 9
.NN 
NumberOfReplicasNN ,
(NN, -
$numNN- .
)NN. /
)OO 
.PP 
MappingsPP 
(PP  
mPP  !
=>PP" $
mPP% &
.QQ 
MapQQ 
<QQ 
PinCodeListQQ *
>QQ* +
(QQ+ ,
typeQQ, 0
=>QQ1 3
typeQQ4 8
.QQ8 9
AutoMapQQ9 @
(QQ@ A
)QQA B
.RR 

PropertiesRR )
(RR) *
propRR* .
=>RR/ 1
propRR2 6
.SS 
NestedSS %
<SS% &
PinCodeSuggestionSS& 7
>SS7 8
(SS8 9
nSS9 :
=>SS; =
nTT& '
.TT' (
NameTT( ,
(TT, -
cTT- .
=>TT/ 1
cTT2 3
.TT3 4

mm_suggestTT4 >
)TT> ?
.UU& '
AutoMapUU' .
(UU. /
)UU/ 0
.VV& '

PropertiesVV' 1
(VV1 2
prop2VV2 7
=>VV8 :
prop2VV; @
.WW* +
NestedWW+ 1
<WW1 2
PayLoadWW2 9
>WW9 :
(WW: ;
n2WW; =
=>WW> @
n2XX. 0
.XX0 1
NameXX1 5
(XX5 6
c2XX6 8
=>XX9 ;
c2YY2 4
.YY4 5
inputYY5 :
)YY: ;
.YY; <
AutoMapYY< C
(YYC D
)YYD E
)YYE F
)YYF G
)YYG H
.ZZ" #

CompletionZZ# -
(ZZ- .
cZZ. /
=>ZZ0 2
cZZ3 4
.[[" #
Name[[# '
([[' (
pN[[( *
=>[[+ -
pN[[. 0
.[[0 1

mm_suggest[[1 ;
)[[; <
.\\# $
Contexts\\$ ,
(\\, -
cont\\- 1
=>\\2 4
cont\\5 9
.]]( )
Category]]) 1
(]]1 2
cate]]2 6
=>]]7 9
cate]]: >
.^^, -
Name^^- 1
(^^1 2
$str^^2 9
)^^9 :
.^^: ;
Path^^; ?
(^^? @
s^^@ A
=>^^B D
s^^E F
.^^F G

mm_suggest^^G Q
.^^Q R
contexts^^R Z
.^^Z [
types^^[ `
)^^` a
)__, -
)__- .
.``" #
Analyzer``# +
(``+ ,
$str``, 6
)``6 7
.aa" #
SearchAnalyzeraa# 1
(aa1 2
$straa2 <
)aa< =
.bb" #
PreserveSeparatorsbb# 5
(bb5 6
falsebb6 ;
)bb; <
)bb< =
)bb= >
)bb> ?
)bb? @
)bb@ A
;bbA B#
ElasticClientOperationsgg +
.gg+ ,
AddDocumentgg, 7
<gg7 8
PinCodeListgg8 C
>ggC D
(ggD E
suggestionListggE S
.ggS T
ToListggT Z
(ggZ [
)gg[ \
,gg\ ]
NewIndexNamegg^ j
,ggj k
sggl m
=>ggn p
sggq r
.ggr s
Idggs u
)ggu v
;ggv w#
ElasticClientOperationshh +
.hh+ ,
Aliashh, 1
(hh1 2
aliaseshh2 9
=>hh: <
aliaseshh= D
.hhD E
RemovehhE K
(hhK L
ahhL M
=>hhN P
ahhQ R
.hhR S
AliashhS X
(hhX Y
aliasIndexNamehhY g
)hhg h
.hhh i
Indexhhi n
(hhn o
$strhho r
)hhr s
)hhs t
.ii/ 0
Addii0 3
(ii3 4
aii4 5
=>ii6 8
aii9 :
.ii: ;
Aliasii; @
(ii@ A
aliasIndexNameiiA O
)iiO P
.iiP Q
IndexiiQ V
(iiV W
NewIndexNameiiW c
)iic d
)iid e
)iie f
;iif g
ifjj 
(jj 
isDeleteOldIndexjj (
)jj( )
{kk #
ElasticClientOperationsll /
.ll/ 0
DeleteIndexll0 ;
(ll; <
OldIndexNamell< H
)llH I
;llI J
}mm 
}nn 
}pp 
catchqq 
(qq 
	Exceptionqq 
exqq 
)qq  
{rr 
Logsss 
.ss 
WriteErrorLogss "
(ss" #
$strss# U
,ssU V
exssW Y
)ssY Z
;ssZ [
Consolett 
.tt 
	WriteLinett !
(tt! "
extt" $
.tt$ %
Messagett% ,
)tt, -
;tt- .
}uu 
}vv 	
}ww 
}xx ˆ
KD:\work\bikewaleweb\Bikewale.PinCodesAutosuggest\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str 7
)7 8
]8 9
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str 9
)9 :
]: ;
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *