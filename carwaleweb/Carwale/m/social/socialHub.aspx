<%@ Page Language="C#" AutoEventWireup="true"  %>
<%
    Title = "CarWale on Social Media";
    Description = "Discover CarWale social media sites and communities here -  hop on and be a part of car conversations online";
    Keywords = "CarWale social media, social media hub, CarWale communities, CarWale Twitter, CarWale Facebook, CarWale online";
    Canonical = "https://www.carwale.com/m/social/" ;
%>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <!-- #include file="/m/includes/global/head-script.aspx" -->
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
    <title>CarWale M</title>
        
<style>
    
       
    .cwm-social-sprite {
        background-image: url("https://img.aeplcdn.com/images/carwale-m-social-sprite.png");
        background-repeat: no-repeat;
        display: inline-block;
    }

    .cwm-social-fb {
        background-position: 0 0;
        width: 45px;
        height: 50px;
    }

    .cwm-social-tw {
        background-position: 0 -70px;
        width: 45px;
        height: 51px;
    }

    .cwm-social-yt {
        background-position: 0 -140px;
        width: 45px;
        height: 51px;
    }

    .cwm-social-ig {
        background-position: 0 -209px;
        width: 45px;
        height: 51px;
    }

    .cwm-social a {
        margin-right: 3px;
        *margin-right: 5px;
        color:#333;
        font-weight:bold;
        text-decoration:none;
    }

    .cwm-social-widget .box {
        padding: 0px;
    }

    .cwm-social-name {
        width: 30%;
        margin-right: 2%;
        /*border-top-left-radius: 5px;*/
        line-height: 17px;
        padding: 10px;
        color: #fff;
        font-size: 12px;
        font-weight: bold;
        float: left;
        margin-right:10%;
        margin-bottom:10px;
    }

    .cwm-social-likes {
        display: table-cell;
        margin-right: 2%;        
        padding-top: 7px;
    }

    .cwm-social-name-fb {
        background-color: #3d59a3;
    }

    .cwm-social-name-tw {
        background-color: #00acee;
    }

    .cwm-social-name-yt {
        background-color: #e62118;
    }

    .cwm-social-name-ig {
        background-color: #5280a4;
    }

    .cwm-social-ytdetails {
        border-bottom: 1px solid #ccc;
        margin-bottom: 10px;
        padding-bottom: 5px;
    }

    .cwm-social-yt-img {
        float: left;
        margin-right: 10px;
        width: 30%;
    }

        .cwm-social-yt-img img {
            max-width: 100%;
        }

    .cwm-social-yt-txt {
        padding-top: 15px;
        overflow: hidden;
    }

    .cwm-social-yt-head {
        font-size: 12px;
        font-weight: bold;
        white-space: nowrap;
        width: 40%;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .cwm-social-yt-views {
        color: #666;
        font-size: 12px;
    }
   .cwm-social-scroll {
    overflow-y: scroll; height:230px; 
    }
    #divInstagram img { border:1px solid #ccc; }
    .cwm-social .bot-rad-0 { border-bottom: 0 !important; border-bottom-left-radius: 0 !important;  border-bottom-right-radius: 0 !important; }
    .cwm-social .cwm-social-widget .box { border-top-left-radius:7px !important; border-top-right-radius:7px !important; }
   
</style>
</head>
    <body class="m-special-skin-body m-no-bg-color">
    <!-- #include file="/m/includes/header.aspx" -->
    <section class="container">
        <div class="grid-12">
	<div class="cwm-social new-line5">
    	<h1 class="margin-top10 margin-bottom10 m-special-skin-text">Carwale on social media</h1>
    	<div class="cwm-social-icons content-inner-block-10 content-box-shadow rounded-corner2 margin-bottom20">
        	<div class="text-center">
        	<a href="https://facebook.com/carwale" target="_blank"><span class="cwm-social-sprite cwm-social-fb"></span></a>
            <a href="https://twitter.com/carwale" target="_blank"><span class="cwm-social-sprite cwm-social-tw"></span></a>
            <a href="http://www.youtube.com/user/CARWALE" target="_blank"><span class="cwm-social-sprite cwm-social-yt"></span></a>
            <a href="http://instagram.com/carwaleindia/" target="_blank"><span class="cwm-social-sprite cwm-social-ig"></span></a>
            <div class="clear"></div>
            </div>
            <div class="new-line head-big-desc" style="margin-left:7px;">
            	Our Committment is to simplify your car buying experience. Come and join the conversation on our social media platforms for all the news, reviews and information about cars.
            </div>
        </div>
        <div class="clear"></div>
        <div class="cwm-social-widget content-inner-block-10 content-box-shadow rounded-corner2 margin-bottom15">
            <div class="box new-line5 bot-rad-0"> 
                <div class="cwm-social-name cwm-social-name-fb">Facebook</div>
                <div class="cwm-social-likes">&nbsp;</div>
                <div class="clear"></div>
            </div>
            <div class="box-bot">
               <div class="fb-like-box" data-href="https://www.facebook.com/carwale" data-colorscheme="light" data-show-faces="false" data-header="false" data-stream="true" data-show-border="false"></div>
            
            </div>
        </div>
        <div class="cwm-social-widget content-inner-block-10 content-box-shadow rounded-corner2 margin-bottom15">
            <div class="box new-line10 bot-rad-0"> 
                <div class="cwm-social-name cwm-social-name-tw">Twitter</div>
                <div class="cwm-social-likes"><a href="https://twitter.com/CarWale" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CarWale</a></div>
                <div class="clear"></div>
            </div>
            <div class="box-bot">
                 <a class="twitter-timeline" width="300" height="400" href="https://twitter.com/CarWale" data-widget-id="555616303193403393" data-chrome="noborders noheader"></a>
            </div>
        </div>
        <div class="cwm-social-widget content-inner-block-10 content-box-shadow rounded-corner2 margin-bottom15">
            <div class="box new-line10 bot-rad-0"> 
                <div class="cwm-social-name cwm-social-name-yt">Youtube</div>
                <div class="cwm-social-likes"><div class="g-ytsubscribe" data-channel="carwale" data-layout="defaultv" data-count="default"></div></div>
                <div class="clear"></div>
            </div>
            <div class="box-bot">
               <div  id="divYoutube" data-bind="foreach: video" class="cwm-social-scroll">
					<div class="cwm-social-ytdetails">
                   <div class="cwm-social-yt-img">
                        <a data-bind="attr: { 'href': link }" target="_blank">
						<img data-bind="attr: { 'src': thumbnail }" alt="" title="" border="0"  />
				
                            </a>	</div>
					<div class="cwm-social-yt-txt" >
						<div class="cwm-social-yt-head">
						 <a target="_blank" data-bind="text: title, attr: { 'href': link }"></a> 
						</div>
						<div class="cwm-social-yt-views">
							<span data-bind="text: viewCount"></span> <span>Views</span>
						</div>
						<div class="clear"></div>
					</div>
					<div class="clear"></div>
                        </div>
				</div>
            </div>
        </div>
        <div class="cwm-social-widget content-inner-block-10 content-box-shadow rounded-corner2 margin-bottom15">
            <div class="box new-line10 bot-rad-0"> 
                <div class="cwm-social-name cwm-social-name-ig">Instagram</div>
                <div class="cwm-social-likes">
                </div>
                <div class="clear"></div>
            </div>
            <div class="box-bot">            
            <div class="cwm-social-scroll text-center" id="divInstagram" data-bind="foreach: inst" style="width:100%;">

             <a data-bind="attr: { 'href': link }" target="_blank">
                                    <img data-bind="attr: { 'src': images.standard_resolution.url }" style="max-width:100%;"/>
                                </a>
                </div>
            </div>
        </div>
    </div>
          </div>
    <div class="clear"></div>
     </section>
    <div class="clear"></div>
<div id="fb-root"></div>


 <!-- #include file="/m/includes/footer.aspx" -->
	<!-- #include file="/m/includes/global/footer-script.aspx" -->


    <script>(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1375656052742405&version=v2.0";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + "://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } }(document, "script", "twitter-wjs");</script>
<script src="https://apis.google.com/js/platform.js"></script>
<script>
    var CLIENTID = '<%=System.Configuration.ConfigurationManager.AppSettings["InstagramClientId"]%>';
    var viewmodelYoutube;
    var totalItems = null;
    var counter = 1, videoCount = 0;
    var nextPageToken = "";
    var tempvideos = [];
    var tempvideoids = "";
    var count = 0;
    var a;
    var b;
    var maxid;
    var viewmodelInstagram;
    var apiresponseIPrev = [];
    var apiresponseIPrevMaxId = [];
    var apiresponseI;
    var originalURL = 'https://api.instagram.com/v1/users/906078399/media/recent/?client_id=' + CLIENTID + '&count=5';

    $(document).ready(function () {
        ko.applyBindings(new YoutubeViewModel(), $('#divYoutube')[0]);
        ko.applyBindings(new InstagramViewModel(), $('#divInstagram')[0]);
        viewmodelYoutube = ko.dataFor($('#divYoutube')[0]);
        viewmodelInstagram = ko.dataFor($('#divInstagram')[0]);
        bindYoutube();
        bindInstagram();
    });

    function YoutubeViewModel() {
        var self = this;
        self.video = ko.observableArray([]);
    };

    function InstagramViewModel() {
        var self = this;
        self.inst = ko.observableArray([]);
    };

    $('#divYoutube').on('scroll', function () {
        if ($(this).scrollTop() + $(this).innerHeight() >= this.scrollHeight && videoCount < totalItems) {
            bindYoutube();
        }
    });

    function bindYoutube() {
        $.ajax({
            type: 'GET',
            url: 'https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=10&playlistId=UUCSOpVi5a-WcQbuZI-Df7EQ&order=date' + (nextPageToken == "" ? "" : ("&pageToken=" + nextPageToken)) + '&key=AIzaSyCQRyGIUebquGytlnfHQL9CT47T_Fh4WNA',
            success: function (json) {
                if (json.items.length > 0) {

                    tempvideoids = "";
                    nextPageToken = json.nextPageToken;
                    if (totalItems == null) totalItems = json.pageInfo.totalResults;

                    for (var i = 0; i < json.items.length; i++) {
                        video = {
                            'viewCount': 0, 'likeCount': 0
                            , 'link': "https://www.youtube.com/watch?v=" + json.items[i].snippet.resourceId.videoId
                            , 'title': json.items[i].snippet.title
                            , 'thumbnail': json.items[i].snippet.thumbnails.default.url
                            , 'id': json.items[i].snippet.resourceId.videoId
                        }
                        tempvideos[video.id] = video;
                        tempvideos.push(tempvideos[video.id]);
                        tempvideoids += (video.id + ",");
                    }
                    getStatisticsAndBind(tempvideoids);
                    videoCount += json.items.length;
                }
            }
            ,
            error: function (request, error) {
                $('#divYoutubeError').removeClass("hide");
                $('#divYoutube').addClass('hide');
            }

        });
    }

    function getStatisticsAndBind(videoIds) {
        $.ajax({
            type: 'GET',
            url: 'https://www.googleapis.com/youtube/v3/videos?part=statistics&id=' + videoIds + '&order=date&key=AIzaSyCQRyGIUebquGytlnfHQL9CT47T_Fh4WNA',
            success: function (json) {
                for (var i = 0; i < json.items.length; i++) {
                    tempvideos[json.items[i].id].likeCount = json.items[i].statistics.likeCount;
                    tempvideos[json.items[i].id].viewCount = json.items[i].statistics.viewCount;
                }
                var viewModel = ko.dataFor(document.getElementById("divYoutube"));
                viewModel.video(tempvideos);
            }
        });
    }
    function listingDataController() {
        counter += 5;
        if (counter < totalItems) {
            $.ajax({
                type: 'GET',
                url: 'https://gdata.youtube.com/feeds/api/videos?author=CARWALE&v=2&orderby=updated&alt=jsonc&max-results=5&start-index=' + counter,
                success: function (json) {
                    apiresponseYT = json;
                    a = apiresponseYT.data.items;
                    a.forEach(function (entry) {
                        viewmodelYoutube.video.push(entry);
                    });
                }
            });
        }
        return counter;
    }
    function bindInstagram() {
        $.ajax({
            type: 'GET',
            crossDomain: true,
            dataType: 'jsonp',
            url: 'https://api.instagram.com/v1/users/906078399/media/recent/?client_id=' + CLIENTID + '&count=5',
            success: function (json) {
                apiresponseI = json;
                //  console.log(apiresponseI.data);
                maxid = apiresponseI.pagination.next_max_id;
                // console.log(maxid + "1");
                count += 1;
                viewmodelInstagram.inst(apiresponseI.data);
            }
        });
        return count;
    }
    $('#divInstagram').scroll(function () {
        var myDiv = document.getElementById("divInstagram");
        height = myDiv.scrollHeight;
        position = myDiv.scrollTop;
        scrollbar = myDiv.clientHeight;
        if ((height - position) == scrollbar) {
            instagramController();
        }
    });
    function instagramController() {
        $.ajax({
            type: 'GET',
            crossDomain: true,
            dataType: 'jsonp',
            url: originalURL + '&max_id=' + maxid,
            success: function (json) {
                apiresponseI = json;
                maxid = apiresponseI.pagination.next_max_id;
                count += 5;
                b = apiresponseI.data;
                b.forEach(function (entry) {
                    viewmodelInstagram.inst.push(entry);
                });
                return count;
            }
        });
    }
</script>

    </body>
</html>