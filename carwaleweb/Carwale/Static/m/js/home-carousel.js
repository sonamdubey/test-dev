var Mobify=window.Mobify=window.Mobify||{};Mobify.$=Mobify.$||window.Zepto||window.jQuery;Mobify.UI=Mobify.UI||{classPrefix:"m-"};(function(e,t){e.support=e.support||{};e.extend(e.support,{touch:"ontouchend"in t})})(Mobify.$,document);Mobify.UI.Utils=function(e){var t={},n=e.support;t.events=n.touch?{down:"touchstart",move:"touchmove",up:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup"};t.getCursorPosition=n.touch?function(e){e=e.originalEvent||e;return{x:e.touches[0].clientX,y:e.touches[0].clientY}}:function(e){return{x:e.clientX,y:e.clientY}};t.getProperty=function(e){var t=["Webkit","Moz","O","ms",""],n=document.createElement("div").style;for(var r=0;r<t.length;++r){if(n[t[r]+e]!==undefined){return t[r]+e}}return};e.extend(n,{transform:!!t.getProperty("Transform"),transform3d:!!(window.WebKitCSSMatrix&&"m11"in new WebKitCSSMatrix)});var r=t.getProperty("Transform");if(n.transform3d){t.translateX=function(e,t){if(typeof t=="number")t=t+"px";e.style[r]="translate3d("+t+",0,0)"}}else if(n.transform){t.translateX=function(e,t){if(typeof t=="number")t=t+"px";e.style[r]="translate("+t+",0)"}}else{t.translateX=function(e,t){if(typeof t=="number")t=t+"px";e.style.left=t}}var i=t.getProperty("Transition"),s=t.getProperty("TransitionDuration");t.setTransitions=function(e,t){if(t){e.style[s]=""}else{e.style[s]="0s"}};t.requestAnimationFrame=function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};var t=function(){e.apply(window,arguments)};return t}();return t}(Mobify.$);Mobify.UI.Carousel=function(e,t){var n={dragRadius:10,moveRadius:20,classPrefix:undefined,classNames:{outer:"carousel",inner:"carousel-inner",item:"item",center:"center",touch:"has-touch",dragging:"dragging",active:"active"}},r=e.support;var i=function(e,t){this.setOptions(t);this.initElements(e);this.initOffsets();this.initAnimation();this.bind()};i.defaults=n;i.prototype.setOptions=function(t){var r=this.options||e.extend({},n,t);r.classNames=e.extend({},r.classNames,t.classNames||{});r.classPrefix=r.classPrefix||Mobify.UI.classPrefix;this.options=r};i.prototype.initElements=function(t){this._index=1;this.element=t;this.$element=e(t);this.$inner=this.$element.find("."+this._getClass("inner"));this.$items=this.$inner.children();this.$start=this.$items.eq(0);this.$sec=this.$items.eq(1);this.$current=this.$items.eq(this._index);this._length=this.$items.length;this._alignment=this.$element.hasClass(this._getClass("center"))?.5:0};i.prototype.initOffsets=function(){this._offset=0;this._offsetDrag=0};i.prototype.initAnimation=function(){this.animating=false;this.dragging=false;this._needsUpdate=false;this._enableAnimation()};i.prototype._getClass=function(e){return this.options.classPrefix+this.options.classNames[e]};i.prototype._enableAnimation=function(){if(this.animating){return}t.setTransitions(this.$inner[0],true);this.$inner.removeClass(this._getClass("dragging"));this.animating=true};i.prototype._disableAnimation=function(){if(!this.animating){return}t.setTransitions(this.$inner[0],false);this.$inner.addClass(this._getClass("dragging"));this.animating=false};i.prototype.update=function(){if(this._needsUpdate){return}var e=this;this._needsUpdate=true;t.requestAnimationFrame(function(){e._update()})};i.prototype._update=function(){if(!this._needsUpdate){return}var e=Math.round(this._offset+this._offsetDrag);t.translateX(this.$inner[0],e);this._needsUpdate=false};i.prototype.bind=function(){function y(e){if(!r.touch)e.preventDefault();i=true;s=false;u=t.getCursorPosition(e);a=0;f=0;l=false;c._disableAnimation();m=c._index==1;g=c._index==c._length}function b(e){if(!i||s)return;var r=t.getCursorPosition(e);a=u.x-r.x;f=u.y-r.y;if(l||n(a)>n(f)&&n(a)>o){l=true;e.preventDefault();if(m&&a<0){a=a*-v/(a-v)}else if(g&&a>0){a=a*v/(a+v)}c._offsetDrag=-a;c.update()}else if(n(f)>n(a)&&n(f)>o){s=true}}function w(e){if(!i){return}i=false;c._enableAnimation();if(!s&&n(a)>d.moveRadius){if(a>0){c.next()}else{c.prev()}}else{c._offsetDrag=0;c.update()}}function E(e){if(l)e.preventDefault()}var n=Math.abs,i=false,s=false,o=this.options.dragRadius,u,a,f,l,c=this,h=this.$element,p=this.$inner,d=this.options,v=this.$element.width(),m=false,g=false;p.on(t.events.down+".carousel",y).on(t.events.move+".carousel",b).on(t.events.up+".carousel",w).on("click.carousel",E).on("mouseout.carousel",w);h.on("click","[data-slide]",function(t){t.preventDefault();var n=e(this).attr("data-slide"),r=parseInt(n,10);if(isNaN(r)){c[n]()}else{c.move(r)}});h.on("afterSlide",function(e,t,n){c.$items.eq(t-1).removeClass(c._getClass("active"));c.$items.eq(n-1).addClass(c._getClass("active"));c.$element.find("[data-slide='"+t+"']").removeClass(c._getClass("active"));c.$element.find("[data-slide='"+n+"']").addClass(c._getClass("active"))});h.trigger("beforeSlide",[1,1]);h.trigger("afterSlide",[1,1]);c.update()};i.prototype.unbind=function(){this.$inner.off()};i.prototype.destroy=function(){this.unbind();this.$element.trigger("destroy");this.$element.remove();this.$element=null;this.$inner=null;this.$start=null;this.$current=null};i.prototype.move=function(e,t){var n=this.$element,r=this.$inner,i=this.$items,s=this.$start,o=this.$current,u=this._length,a=this._index;t=t||{};if(e<1){e=1}else if(e>this._length){e=u}if(e==this._index){}n.trigger("beforeSlide",[a,e]);this.$current=o=i.eq(e-1);var f=o.prop("offsetLeft")+o.prop("clientWidth")*this._alignment,l=s.prop("offsetLeft")+s.prop("clientWidth")*this._alignment;var c=-(f-l);this._offset=c;this._offsetDrag=0;this._index=e;this.update();n.trigger("afterSlide",[a,e])};i.prototype.next=function(){this.move(this._index+1)};i.prototype.prev=function(){this.move(this._index-1)};return i}(Mobify.$,Mobify.UI.Utils);(function(e){e.fn.carousel=function(t,n){var r=e.extend({},e.fn.carousel.defaults);if(typeof t=="object"){r=e(r,t);n=null;t=null}this.each(function(){var i=e(this),s=this._carousel;if(!s){s=new Mobify.UI.Carousel(this,r)}if(t){s[t](n);if(t==="destroy"){s=null}}this._carousel=s});return this};e.fn.carousel.defaults={}})(Mobify.$)