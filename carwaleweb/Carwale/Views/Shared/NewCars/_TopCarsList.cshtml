@model TopCarsByBodyTypeDto
@using Carwale.UI.Common;
@using Carwale.UI.PresentationLogic;
@using Carwale.Utility;
@using Carwale.Entity;
@using Carwale.Entity.Enum;
@using Carwale.DTOs.CarData;


<script type="text/javascript">
        nextPageUrl = "@Html.Raw(string.IsNullOrEmpty(Model.NextPageUrl) ? "" : Model.NextPageUrl)"
        filterAppliedCount = '@Model.FilterAppliedCount' 
        totalModels = '@Model.TotalModels' 
        $('img.lazy').lazyload();
</script>
@{ int i = 1;}
@foreach (var result in Model.ModelList)
{
    <li class="hatchback-content-box">
        <div class="hatchback-container">
                <div class="pos-relative hatchback-left-unit">
                    <div class="car-count-image text-center">
                        <img class="hatchback-image lazy" src="@(CWConfiguration._imgHostUrl)0x0/statics/grey.gif" data-original="@ImageSizes.CreateImageUrl(result.HostUrl, ImageSizes._227X128,result.OriginalImgPath)" width="227" height="128" alt="@result.MakeName @result.ModelName" title="@result.MakeName @result.ModelName">
                    </div>
                    <div class="car-basic-details" data-role="inview-imp" data-cat="Top10Cars" data-event="CWNonInteractive" data-action="model_impression" data-label="Top@(Model.BodyType)Page_@(result.ModelName)_@(i-1)">
                        <a title="@result.MakeName @result.ModelName" href="@ManageCarUrl.CreateModelUrl(result.MakeName,result.MaskingName)" data-role="click" data-event="CWInteractive" data-cat="Top10Cars" data-action="model_clicked" data-label="Top@(Model.BodyType)Page_@(result.ModelName)_@(i-1)">
                            <h2 class="text-black text-bold"><span class="hatchback-make hatchback-model">@result.MakeName @result.ModelName</span></h2>
                        </a>
                        <div class="leftfloat">
                            <div class="text-bold price-unit text-black"><small class="font18">@result.CarPriceOverview.PricePrefix</small><span class="font18">  @result.CarPriceOverview.Price </span><small class="font11 text-light-grey">@result.CarPriceOverview.PriceSuffix</small></div>
                            <div class="text-bold margin-bottom10 font11 text-light-grey text-unbold @result.CarPriceOverview.LabelColor">@(!string.IsNullOrEmpty(result.CarPriceOverview.PriceLabel) ? result.CarPriceOverview.PriceLabel + (result.CarPriceOverview.City.Id > 0 ? "," : string.Empty) : string.Empty) <span>@result.CarPriceOverview.City.Name</span> @(result.CarPriceOverview.PriceStatus > (int)PriceBucket.HaveUserCity ? Html.Raw("<span class='average-info-tooltip class-ad-tooltip tooltip-icon inline-block'>i</span><span class='average-info-content hide'>" + @result.CarPriceOverview.ReasonText + "</span>") : Html.Raw(""))</div>

                        </div>
                        <div class="rightfloat margin-top10">
                            @if (ViewBag.IsMobile)
                            {
                                if (string.IsNullOrWhiteSpace(Model.CityName))
								{
                                    <span class="text-bold select-city-link text-link" data-role="click" data-event="CWInteractive" data-cat="ShowORPTest" data-action="Top@(Model.BodyType)Page_ChangeCity" data-label="@(result.MakeName+" "+result.ModelName)">@System.Configuration.ConfigurationManager.AppSettings["ShowPriceInCityText"]</span>
								}
								else if (result.CarPriceOverview.PriceStatus == (int)PriceBucket.HaveUserCity)
								{
                                    <span class="text-bold price-breakup-link text-link" modelid="@result.ModelId" cityid="@result.CarPriceOverview.City.Id" cityname="@result.CarPriceOverview.City.Name" data-role="click" data-event="CWInteractive" data-cat="ShowORPTest" data-action="Top@(Model.BodyType)Page_ViewBreakup" data-label="@(result.CarPriceOverview.City.Name+"_"+result.MakeName+"_"+result.ModelName)" onclick="redirectOrOpenPopup(this, 131)">@System.Configuration.ConfigurationManager.AppSettings["ViewPriceBreakupText"]</span>
								}
							}
							else
							{
								if (string.IsNullOrWhiteSpace(Model.CityName))
								{
                                    <span class="btn btn-orange btn-xs font14 btnCityPopUp" data-cwtccat="Top@(Model.BodyType)Page" data-cwtcact="OnRoadPriceButton" data-cwtclbl="make:@result.MakeName |model:@result.ModelName|city:@Model.CityZone" data-pageid="130" data-modelid="@result.ModelId" data-role="click-inview-imp" data-action="showpriceinmycity" data-cat="Desktop_Top@(Model.BodyType)Page_ModelCard" data-label="@result.ModelName">@CWConfiguration.orpText</span>
								}
								else if (result.CarPriceOverview.PriceStatus == (int)PriceBucket.HaveUserCity)
								{
                                    <span class="btn btn-orange btn-xs font14 btnChkOnRoadPrice" data-cwtccat="Top@(Model.BodyType)Page" data-cwtcact="OnRoadPriceButton" data-cwtclbl="make:@result.MakeName |model:@result.ModelName|city:@Model.CityZone" data-pageid="130" data-modelid="@result.ModelId" data-role="click-inview-imp" data-action="viewpricebreakup" data-cat="Desktop_Top@(Model.BodyType)Page_ModelCard" data-label="@(result.ModelName + "_" + Model.CityZone)">@CWConfiguration.ViewPriceBreakupText</span>
								}
							}
                        </div>
                    </div>
                </div>
                <div class="basic-details-section">
                    @if (!string.IsNullOrEmpty(result.Mileage))
						    {
                        <div class="mileage-unit basic-details-unit">
                            <span>Mileage</span>
                            <p>@result.Mileage</p>
                        </div>
						    }
                    @if (result?.Colours?.Count > 0)
						    {
                                <div class="color-unit basic-details-unit">
                                    <span>@(result.Colours.Count > 1 ? "Colours" : "Colour")</span>
                                    <ul>
                                        @foreach (var color in result.Colours)
									    {
										    var hexList = color.HexCode.Split(',');
                                            <li class="color-list__item" title="@color.Color">
                                                @foreach (var hex in hexList)
											    {
                                                    <div style="background-color:#@hex.Trim();width:@(100 / hexList.Length)%"></div>
											    }
                                            </li>
									    }
                                    </ul>
                                </div>
						    }
                </div>
                <div class="hatchback-more-info">
                    @*<h2 class="text-grey ">More about @result.MakeName @result.ModelName</h2>*@
                    <div class="other-tags clear">
                        @if (result.NewsCount > 0)
							{
                            <a class="tag-unit text-grey" href="@string.Format(ViewBag.IsMobile ? "/m/{0}-cars/{1}news/" : "/{0}-cars/{1}news/", UrlRewrite.FormatSpecial(result.MakeName ?? string.Empty), (result.ModelId > 0 ? result.MaskingName + "/" : string.Empty))" data-role="click" data-event="CWInteractive" data-cat="Top10Cars" data-action="capsule" data-label="Top@(Model.BodyType)Page_@(result.ModelName)_News_@(i-1)"><span class="icons car-news-icon" data-role="inview-imp" data-cat="Top10Cars" data-event="CWNonInteractive" data-action="capsule_impression" data-label="Top@(Model.BodyType)Page_@(result.ModelName)_News_@(i-1)"></span> News</a>
							}
                        @if (result.PhotoCount > 0)
							{
                            <a class="tag-unit text-grey" href="@string.Format(ViewBag.IsMobile ? "/m/{0}-cars/{1}images/" : "/{0}-cars/{1}images/", UrlRewrite.FormatSpecial(result.MakeName ?? string.Empty), (result.ModelId > 0 ? result.MaskingName + "/" : string.Empty))" data-role="click" data-event="CWInteractive" data-cat="Top10Cars" data-action="capsule" data-label="Top@(Model.BodyType)Page_@(result.ModelName)_Images_@(i-1)"><span class="icons car-images-icon" data-role="inview-imp" data-cat="Top10Cars" data-event="CWNonInteractive" data-action="capsule_impression" data-label="Top@(Model.BodyType)Page_@(result.ModelName)_Images_@(i-1)"></span> Images</a>
							}
                        @if (result.VideoCount > 0)
							{
                            <a class="tag-unit text-grey" href="@string.Format(ViewBag.IsMobile ? "/m/{0}-cars/{1}videos/" : "/{0}-cars/{1}videos/", UrlRewrite.FormatSpecial(result.MakeName ?? string.Empty), (result.ModelId > 0 ? result.MaskingName + "/" : string.Empty))" data-role="click" data-event="CWInteractive" data-cat="Top10Cars" data-action="capsule" data-label="Top@(Model.BodyType)Page_@(result.ModelName)_Videos_@(i-1)"><span class="icons car-videos-icon" data-role="inview-imp" data-cat="Top10Cars" data-event="CWNonInteractive" data-action="capsule_impression" data-label="Top@(Model.BodyType)Page_@(result.ModelName)_Videos_@(i-1)"></span> Videos</a>
							}
                        @if (result.ExpertReviewCount > 0)
							{
                            <a class="tag-unit text-grey" href="@string.Format(ViewBag.IsMobile ? "/m/{0}-cars/{1}expert-reviews/" : "/{0}-cars/{1}expert-reviews/", UrlRewrite.FormatSpecial(result.MakeName ?? string.Empty), (result.ModelId > 0 ? result.MaskingName + "/" : string.Empty))" data-role="click" data-event="CWInteractive" data-cat="Top10Cars" data-action="capsule" data-label="Top@(Model.BodyType)Page_@(result.ModelName)_Reviews_@(i-1)"><span class="icons car-reviews-icon" data-role="inview-imp" data-cat="Top10Cars" data-event="CWNonInteractive" data-action="capsule_impression" data-label="Top@(Model.BodyType)Page_@(result.ModelName)_Reviews_@(i-1)"></span> Reviews</a>
							}
                    </div>
                    <div class="clear"></div>
                </div>
            </div><div class="clear"></div>
    </li>
}

