@using System.Configuration;
@model IEnumerable<Carwale.Entity.Deals.DealsStock>
@{int carCount = Convert.ToInt32(ConfigurationManager.AppSettings["CarCount"]) < Model.Count() ? Convert.ToInt32(ConfigurationManager.AppSettings["CarCount"]) : Model.Count();}
<div id="advt-best-saving"><div class="swiper-container best-saving-car margin-top10"><ul class="swiper-wrapper">
			@for (int i = 0; i < carCount; i++)
			{
				var car = Model.ElementAt(i);
				<li class="swiper-slide content-box-shadow advantagelinks"><a href='javascript:void()'><div class="contentWrapper" data-tracking="carsWithSavings" data-savings="@car.Savings" data-model="@car.Model.ModelName" data-city="@car.City.CityName"
							 data-url="/m/@Carwale.UI.Common.UrlRewrite.FormatSpecial(car.Make.MakeName)-cars/@car.Model.MaskingName/advantage/?cityid=@car.City.CityId"><div>
								@if (!string.IsNullOrWhiteSpace(car.Offers))
								{
									<div class="position-abt pos-left0 pos-top0"><div class="offers-title text-white font11 text-uppercase"><span class="offers-top-shadow"></span><span class="offers-text">Offer</span><span class="offers-right-ribbon"><span class="ribbon top"></span><span class="ribbon bottom"></span></span></div></div>
								}
							</div><div class="imageWrapper"><img class="lazy" data-original="@Carwale.Utility.ImageSizes.CreateImageUrl(@car.CarImageDetails.HostUrl, @Carwale.Utility.ImageSizes._272X153, @car.CarImageDetails.ImagePath)" alt="" title="" src=""></div><div class="carDescWrapper"><div class="carTitle"><h3 class="text-black">
										@car.Make.MakeName @Carwale.Utility.Format.FilterModelName(car.Model.ModelName)
									</h3></div>
								@if (car.Savings > 0)
								{
									<div class="font13 margin-top10 margin-bottom10"><span class="striked-amount position-rel text-black"><span class="striked-line text-black"></span>₹<span class=""> @Carwale.Utility.Format.FormatNumericCommaSep(car.OnRoadPrice.ToString())</span></span><span class="text-green margin-left10">(@Carwale.Utility.Format.FormatNumericCommaSep(car.Savings.ToString()) off)</span>
										@if (car.StockCount == 1)
										{
											<span class="text-red margin-left5">@car.StockCount car left</span>
										}
										else if (car.StockCount > 1 && car.StockCount <= 3)
										{
											<span class="text-red margin-left5">@car.StockCount cars left</span>
										}
									</div>
								}
								else if (car.OfferValue > 0)
								{
									<div class="font13 margin-top10 margin-bottom10  zero-savings-offers"><span class="text-green zero-savings-amt">Offers worth <span class="margin-left5">₹</span> @Carwale.Utility.Format.FormatNumericCommaSep(car.OfferValue.ToString())</span></div>
								}
								else
								{
									<div class="font13 margin-top10 margin-bottom10"><span class="text-green">Offer available</span></div>
								}
								<div class="font18 text-black"><span class="text-bold">₹ @Carwale.Utility.Format.FormatNumericCommaSep(car.OfferPrice.ToString())</span><span class="text-grey font13">On-Road Price @car.City.CityName</span></div><div class='font13 margin-top5'><span class='text-green extra-offer-link @(car.OfferValue > 0 && car.Savings > 0 ? "" : "no-offer-link")'>Extra offers worth <span class="margin-left5">₹</span><span class="extra-offer-amount">@Carwale.Utility.Format.FormatNumericCommaSep(car.OfferValue.ToString())</span></span></div><span class="margin-top10 inline-block click-link"> Show Complete Details</span></div></div></a></li>
			}
			@if (Model.Count() > carCount)
			{
			<li class="swiper-slide content-box-shadow text-center padding-left10 padding-right10 padding-top40 view-all-card"><div class="margin-top70 block clear"><span class="deals-car-sprite book-now-thumb"></span><span class="deals-car-sprite advantage-red-logo"></span></div><div class="clear"></div><h3 class="text-black margin-bottom10 margin-top30 block clear">More Cars are available in @Model.FirstOrDefault().City.CityName</h3><div class="clear"></div><a href="/m/advantage/?cityid=@Model.FirstOrDefault().City.CityId" data-role="click-tracking" data-event="CWInteractive" data-action="landingPageAccess_Mobile" data-cat="deals_mobile" data-label="@(ViewBag.PageId == 1 ? "homepagecarousalend_Mobile" : "newcarpagecarousalend_Mobile")" class="font14 block clear">View all cars</a></li>
			}
	   </ul><div class="clear"></div><!-- Add Pagination --><div class="swiper-pagination swiper-pagination-white hide"></div><!-- Navigation --><div class="swiper-button-next swiper-button-white"></div><div class="swiper-button-prev swiper-button-white"></div></div></div>